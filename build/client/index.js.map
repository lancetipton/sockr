{"version":3,"file":"index.js","sources":["../../src/client/context/context.js","../../src/client/hooks/useSockr.js","../../src/client/hocs/sockrHoc.js","../../src/client/reducer/sockrState.js","../../node_modules/@keg-hub/jsutils/build/esm/validate-0eec5ac6.js","../../node_modules/@keg-hub/jsutils/build/esm/isArr-a4420764.js","../../node_modules/@keg-hub/jsutils/build/esm/isObj-2a71d1af.js","../../node_modules/@keg-hub/jsutils/build/esm/isFunc-40ceeef8.js","../../node_modules/@keg-hub/jsutils/build/esm/deepFreeze-0437aacd.js","../../node_modules/@keg-hub/jsutils/build/esm/typeOf-8c86a991.js","../../node_modules/@keg-hub/jsutils/build/esm/match-61fbd7dc.js","../../node_modules/@keg-hub/jsutils/build/esm/exists-bf542cb8.js","../../node_modules/@keg-hub/jsutils/build/esm/isNum-cc6ad9ca.js","../../node_modules/@keg-hub/jsutils/build/esm/isNonNegative-76ec0014.js","../../node_modules/@keg-hub/jsutils/build/esm/isStr-481ce69b.js","../../node_modules/@keg-hub/jsutils/build/esm/isBool-4d844d9e.js","../../node_modules/@keg-hub/jsutils/build/esm/identity-aa1ca9c0.js","../../node_modules/@keg-hub/jsutils/build/esm/uniqArr-d83b2468.js","../../node_modules/@keg-hub/jsutils/build/esm/hasOwn-deb5bbb8.js","../../node_modules/@keg-hub/jsutils/build/esm/isColl-15a1452b.js","../../node_modules/@keg-hub/jsutils/build/esm/get-8e62f069.js","../../node_modules/@keg-hub/jsutils/build/esm/deepClone-8a68e415.js","../../node_modules/@keg-hub/jsutils/build/esm/isEmpty-324adee6.js","../../node_modules/@keg-hub/jsutils/build/esm/parseErrorMessage-0a52f8cc.js","../../node_modules/@keg-hub/jsutils/build/esm/toStr-0e5fe94c.js","../../node_modules/@keg-hub/jsutils/build/esm/getWordEndingAt-6d1f9d3c.js","../../node_modules/@keg-hub/jsutils/build/esm/sanitize-2f5be6f2.js","../../node_modules/@keg-hub/jsutils/build/esm/toBool-8f49e620.js","../../node_modules/@keg-hub/jsutils/build/esm/softFalsy-b9d5bbac.js","../../node_modules/@keg-hub/jsutils/build/esm/toNum-db57d125.js","../../node_modules/@keg-hub/jsutils/build/esm/toInt-082bd5f3.js","../../node_modules/@keg-hub/jsutils/build/esm/shallowEqual-a7f44ae7.js","../../node_modules/@keg-hub/jsutils/build/esm/set-75e278f2.js","../../node_modules/@keg-hub/jsutils/build/esm/isValidDate-7279a0a9.js","../../node_modules/@keg-hub/jsutils/build/esm/strToType-0d2d490d.js","../../node_modules/@keg-hub/jsutils/build/esm/log-8543c007.js","../../node_modules/@keg-hub/jsutils/build/esm/reduceObj-7d9f0ad1.js","../../node_modules/@keg-hub/jsutils/build/esm/filterObj-15604392.js","../../node_modules/@keg-hub/jsutils/build/esm/wait-26c5e7c6.js","../../node_modules/@keg-hub/jsutils/build/esm/joinRegex-b645166a.js","../../node_modules/@keg-hub/jsutils/build/esm/getURLParam-ba57cf43.js","../../src/client/hooks/useSockrItems.js","../../node_modules/parseuri/index.js","../../node_modules/ms/index.js","../../node_modules/debug/src/common.js","../../node_modules/debug/src/browser.js","../../node_modules/socket.io-client/build/url.js","../../node_modules/has-cors/index.js","../../node_modules/engine.io-client/lib/globalThis.browser.js","../../node_modules/engine.io-client/lib/xmlhttprequest.js","../../node_modules/engine.io-parser/lib/commons.js","../../node_modules/engine.io-parser/lib/encodePacket.browser.js","../../node_modules/base64-arraybuffer/lib/base64-arraybuffer.js","../../node_modules/engine.io-parser/lib/decodePacket.browser.js","../../node_modules/engine.io-parser/lib/index.js","../../node_modules/component-emitter/index.js","../../node_modules/engine.io-client/lib/transport.js","../../node_modules/parseqs/index.js","../../node_modules/yeast/index.js","../../node_modules/engine.io-client/lib/transports/polling.js","../../node_modules/engine.io-client/lib/util.js","../../node_modules/engine.io-client/lib/transports/polling-xhr.js","../../node_modules/engine.io-client/lib/transports/polling-jsonp.js","../../node_modules/engine.io-client/lib/transports/websocket-constructor.browser.js","../../node_modules/engine.io-client/lib/transports/websocket.js","../../node_modules/engine.io-client/lib/transports/index.js","../../node_modules/engine.io-client/lib/socket.js","../../node_modules/engine.io-client/lib/index.js","../../node_modules/socket.io-parser/dist/is-binary.js","../../node_modules/socket.io-parser/dist/binary.js","../../node_modules/socket.io-parser/dist/index.js","../../node_modules/socket.io-client/build/on.js","../../node_modules/socket.io-client/build/socket.js","../../node_modules/backo2/index.js","../../node_modules/socket.io-client/build/manager.js","../../node_modules/socket.io-client/build/index.js","../../src/constants/eventTypes.js","../../src/client/actions/addPeer.js","../../src/client/actions/setId.js","../../src/client/actions/setCmds.js","../../src/client/actions/init.js","../../src/client/actions/connect.js","../../src/client/actions/toggleIsRunning.js","../../src/client/actions/cmdEnd.js","../../src/client/actions/cmdErr.js","../../src/client/actions/cmdFail.js","../../src/client/actions/cmdOut.js","../../src/client/actions/peerDisconnect.js","../../src/client/service/socketService.js","../../src/client/reducer/sockrReducer.js","../../src/client/reducer/joinReducers.js","../../src/client/reducer/useSockrReducer.js","../../src/client/context/SockrProvider.js","../../src/constants/index.js"],"sourcesContent":["import React from 'react'\n\n/**\n * Creates the initial theme context\n */\nexport const SocketContext = React.createContext(null)\n","import { SocketContext } from '../context/context'\nimport { useContext } from 'react'\n\n/**\n * Helper hook to get the websocket content\n * @function\n * @public\n * @export\n *\n * @returns {Object} websocket context object\n */\nexport const useSockr = () => {\n  return useContext(SocketContext)\n}\n","import { useSockr } from '../hooks/useSockr'\nimport React from 'react'\n\n/**\n * Websocket HOC component\n * @function\n * @public\n * @export\n * @param {Object} props\n *\n */\nexport const SockrHoc = Component => {\n  const websocket = useSockr()\n  return props => <Component {...props} websocket={websocket} />\n}\n","/**\n * Cache holder for the sockr sate object\n * Should be update every time the sockr reducer state is changed\n * @type Object\n * @private\n *\n */\nlet _SOCKR_STATE\n\n/**\n * Cache holder for the sockr dispatch method\n * @function\n * @private\n *\n * @returns {void}\n */\nlet _SOCKR_DISPATCH = () =>\n  console.warn(`Sockr Dispatch has not been initialized!`)\n\n/**\n * Helper to get the sockrDispatch method\n * @function\n * @public\n * @export\n *\n * @returns {function} Sockr dispatch method\n */\nexport const getState = () => _SOCKR_STATE\n\n/**\n * Helper to get the sockrDispatch method\n * @function\n * @public\n * @export\n *\n * @returns {function} Sockr dispatch method\n */\nexport const getDispatch = () => _SOCKR_DISPATCH\n\n/**\n * Sets the internally managed sockr state object\n * @function\n * @public\n * @export\n * @param {Object} next - The next state object\n *\n * @returns {void}\n */\nexport const setNextState = next => {\n  _SOCKR_STATE = next\n}\n\n/**\n * Sets the internally managed sockr dispatch function\n * @function\n * @public\n * @export\n * @param {function} dispatch - The store dispatch function\n *\n * @returns {void}\n */\nexport const setDispatch = dispatch => {\n  _SOCKR_DISPATCH = dispatch\n}\n\n/**\n * Helper matching the redux API to get the getState and getDispatch methods\n * @function\n * @public\n * @export\n * @param {function} dispatch - The store dispatch function\n *\n * @returns {void}\n */\nexport const getStore = () => {\n  return {\n    getState,\n    getDispatch,\n  }\n}\n","const OPTIONS = {\n  SHOULD_LOG: true,\n  SHOULD_THROW: false,\n  LOG_PREFIX: null\n};\nconst validate = (argObj, validators = {}, {\n  logs = OPTIONS.SHOULD_LOG,\n  throws = OPTIONS.SHOULD_THROW,\n  prefix = OPTIONS.LOG_PREFIX\n} = {}) => {\n  const validationCaseEntries = Object.entries(argObj);\n  const defaultValidator = () => true;\n  const validationResults = validationCaseEntries.map(([argName, argValue]) => validateArgument(argName, argValue, validators[argName] || validators['$default'] || defaultValidator));\n  const reduceCases = (total, next) => validationReducer(total, next, {\n    logs,\n    throws,\n    prefix\n  });\n  const {\n    success,\n    cases\n  } = validationResults.reduce(reduceCases, {\n    success: true,\n    cases: {}\n  });\n  return [success, cases];\n};\nvalidate.setOptions = ({\n  logs,\n  throws,\n  prefix\n}) => {\n  if (logs !== undefined) {\n    OPTIONS.SHOULD_LOG = logs;\n  }\n  if (throws !== undefined) {\n    OPTIONS.SHOULD_THROW = throws;\n  }\n  if (prefix !== undefined) {\n    OPTIONS.LOG_PREFIX = prefix;\n  }\n};\nvalidate.resetOptions = () => {\n  OPTIONS.SHOULD_LOG = true;\n  OPTIONS.SHOULD_THROW = false;\n  OPTIONS.LOG_PREFIX = null;\n};\nconst validateArgument = (key, value, validator) => {\n  const success = validator(value);\n  const shouldStringifyValidator = !validator.name || validator.name === key || validator.name === '$default';\n  const validatorString = shouldStringifyValidator ? validator.toString() : validator.name;\n  const reason = success ? null : [`Argument \"${key}\" with value `, value, ` failed validator: ${validatorString}.`];\n  return {\n    success,\n    key,\n    value,\n    validator,\n    reason\n  };\n};\nconst validationReducer = (finalResult, nextValidation, {\n  logs,\n  throws,\n  prefix\n}) => {\n  !nextValidation.success && handleFailure(nextValidation, logs, throws, prefix);\n  return {\n    success: finalResult.success && nextValidation.success,\n    cases: { ...finalResult.cases,\n      [nextValidation.key]: nextValidation\n    }\n  };\n};\nconst handleFailure = (validation, shouldLog, shouldThrow, prefix) => {\n  const reason = prefix ? [prefix, ...validation.reason] : validation.reason;\n  if (shouldThrow) throw new Error(reason.join());\n  if (shouldLog) console.error(...reason);\n};\n\nexport { validate as v };\n//# sourceMappingURL=validate-0eec5ac6.js.map\n","const isArr = value => Array.isArray(value);\n\nexport { isArr as i };\n//# sourceMappingURL=isArr-a4420764.js.map\n","const isObj = obj => typeof obj === 'object' && !Array.isArray(obj) && obj !== null;\n\nexport { isObj as i };\n//# sourceMappingURL=isObj-2a71d1af.js.map\n","const isFunc = func => typeof func === 'function';\n\nexport { isFunc as i };\n//# sourceMappingURL=isFunc-40ceeef8.js.map\n","import { i as isFunc } from './isFunc-40ceeef8.js';\n\nconst deepFreeze = obj => {\n  Object.freeze(obj);\n  Object.getOwnPropertyNames(obj).map(prop => {\n    obj.hasOwnProperty(prop) && obj[prop] !== null && (typeof obj[prop] === 'object' || isFunc(obj[prop])) && !Object.isFrozen(obj[prop]) && deepFreeze(obj[prop]);\n  });\n  return obj;\n};\n\nexport { deepFreeze as d };\n//# sourceMappingURL=deepFreeze-0437aacd.js.map\n","const typeOf = val => Object.prototype.toString.call(val).slice(8, -1);\n\nexport { typeOf as t };\n//# sourceMappingURL=typeOf-8c86a991.js.map\n","import { i as isArr } from './isArr-a4420764.js';\nimport { i as isFunc } from './isFunc-40ceeef8.js';\nimport { d as deepFreeze } from './deepFreeze-0437aacd.js';\nimport { t as typeOf } from './typeOf-8c86a991.js';\n\nconst noOp = () => {};\nconst noOpObj = Object.freeze({});\nconst noPropObj = deepFreeze({\n  content: {}\n});\nconst noPropArr = deepFreeze([]);\n\nconst match = (matchArg, ...args) => {\n  if (!args.length) return null;\n  for (let entry of args) {\n    if (!isArr(entry)) {\n      console.error(`Matching case must be an entry (a 2-element array). Found: ${typeOf(entry)}`, entry);\n      break;\n    }\n    const [caseValueOrPredicate, valueOnMatch] = entry;\n    if (isFunc(caseValueOrPredicate) && caseValueOrPredicate(matchArg)) return valueOnMatch;\n    if (caseValueOrPredicate === matchArg) return valueOnMatch;\n  }\n  return null;\n};\nmatch.default = () => true;\n\nexport { noOpObj as a, noPropObj as b, noPropArr as c, match as m, noOp as n };\n//# sourceMappingURL=match-61fbd7dc.js.map\n","const exists = value => value === value && value !== undefined && value !== null;\n\nexport { exists as e };\n//# sourceMappingURL=exists-bf542cb8.js.map\n","const equalsNaN = val => typeof val === 'number' && val != val;\n\nconst isNum = val => typeof val === 'number' && !equalsNaN(val);\n\nexport { equalsNaN as e, isNum as i };\n//# sourceMappingURL=isNum-cc6ad9ca.js.map\n","import { i as isNum } from './isNum-cc6ad9ca.js';\n\nconst isNonNegative = val => isNum(val) && val >= 0;\n\nexport { isNonNegative as i };\n//# sourceMappingURL=isNonNegative-76ec0014.js.map\n","const isStr = str => typeof str === 'string';\n\nexport { isStr as i };\n//# sourceMappingURL=isStr-481ce69b.js.map\n","const isBool = val => typeof val === 'boolean';\n\nexport { isBool as i };\n//# sourceMappingURL=isBool-4d844d9e.js.map\n","import { v as validate } from './validate-0eec5ac6.js';\nimport { i as isStr } from './isStr-481ce69b.js';\nimport { i as isNum } from './isNum-cc6ad9ca.js';\nimport { i as isBool } from './isBool-4d844d9e.js';\n\nconst isOrderable = x => isStr(x) || isNum(x) || isBool(x);\n\nconst compareTo = (x, y) => {\n  const [valid] = validate({\n    x,\n    y\n  }, {\n    $default: isOrderable\n  });\n  if (!valid) return null;\n  return isStr(x) ? x.localeCompare(y) : x - y;\n};\n\nconst identity = x => x;\n\nexport { identity as a, compareTo as c, isOrderable as i };\n//# sourceMappingURL=identity-aa1ca9c0.js.map\n","import { v as validate } from './validate-0eec5ac6.js';\nimport { i as isArr } from './isArr-a4420764.js';\nimport { i as isObj } from './isObj-2a71d1af.js';\nimport { i as isFunc } from './isFunc-40ceeef8.js';\nimport { a as noOpObj } from './match-61fbd7dc.js';\nimport { e as exists } from './exists-bf542cb8.js';\nimport { i as isNonNegative } from './isNonNegative-76ec0014.js';\nimport { a as identity, c as compareTo } from './identity-aa1ca9c0.js';\n\nconst buildElementCountMap = arr => {\n  const counts = new Map();\n  for (let i = 0; i < arr.length; i++) {\n    var _counts$get;\n    const element = arr[i];\n    const count = (_counts$get = counts.get(element)) !== null && _counts$get !== void 0 ? _counts$get : 0;\n    counts.set(element, count + 1);\n  }\n  return counts;\n};\nconst areCountMapsEqual = (mapA, mapB) => {\n  if (mapA.size !== mapB.size) return false;\n  for (let [key, count] of mapA) {\n    const otherCount = mapB.get(key);\n    if (otherCount !== count) return false;\n  }\n  return true;\n};\nconst areFrequencyEqual = (arr, otherArr) => {\n  const [valid] = validate({\n    arr,\n    otherArr\n  }, {\n    $default: isArr\n  });\n  if (!valid) return null;\n  if (arr === otherArr) return true;\n  if (arr.length !== otherArr.length) return false;\n  const arrCounts = buildElementCountMap(arr);\n  const otherCounts = buildElementCountMap(otherArr);\n  return areCountMapsEqual(arrCounts, otherCounts);\n};\n\nconst areSetEqual = (arr, otherArr) => {\n  const [valid] = validate({\n    arr,\n    otherArr\n  }, {\n    $default: isArr\n  });\n  if (!valid) return null;\n  if (arr === otherArr) return true;\n  const [longest, shortest] = arr.length > otherArr.length ? [arr, otherArr] : [otherArr, arr];\n  const arrSet = new Set(shortest);\n  for (let i = 0; i < longest.length; i++) {\n    const element = longest[i];\n    if (!arrSet.has(element)) return false;\n  }\n  return true;\n};\n\nconst cloneArr = arr => Array.from([\n...(isArr(arr) && arr || isObj(arr) && Object.entries(arr) || [])]);\n\nconst eitherArr = (a, b) => isArr(a) ? a : b;\n\nconst ensureArr = val => isArr(val) ? val : [val];\n\nconst flatten = (arr, result, opts) => {\n  for (let i = 0; i < arr.length; i++) {\n    const value = arr[i];\n    isArr(value) ? flatten(value, result, opts) : opts.exists && !exists(value) || opts.truthy && !value ? result : result.push(value);\n  }\n  if (!opts.mutate) return result;\n  Object.assign(arr, result).splice(result.length);\n  return arr;\n};\nconst flatArr = (arr, opts) => flatten(arr, [], isObj(opts) ? opts : noOpObj);\n\nconst flatMap = (arr, mapFn) => {\n  const [inputIsValid] = validate({\n    arr,\n    mapFn\n  }, {\n    arr: isArr,\n    mapFn: isFunc\n  });\n  if (!inputIsValid) return arr;\n  return arr.reduce((finalArr, current) => {\n    const result = mapFn(current);\n    isArr(result) ? result.map(el => finalArr.push(el)) : finalArr.push(result);\n    return finalArr;\n  }, []);\n};\n\nconst findExtrema = (arr, comparator) => {\n  const [valid] = validate({\n    arr,\n    comparator\n  }, {\n    arr: isArr,\n    $default: isFunc\n  });\n  if (!valid) return null;\n  return arr.length ? arr.reduce((extremaSoFar, next) => comparator(extremaSoFar, next) > 0 ? extremaSoFar : next) : null;\n};\n\nconst findMax = (arr = [], propSelector = identity) => findExtrema(arr, (x, y) => compareTo(propSelector(x), propSelector(y)));\n\nconst findMin = (arr = [], propSelector = identity) => findExtrema(arr, (x, y) => compareTo(propSelector(y), propSelector(x)));\n\nconst omitRange = (arr, startIndex, count) => {\n  const [inputIsValid] = validate({\n    arr,\n    startIndex,\n    count\n  }, {\n    arr: isArr,\n    $default: isNonNegative\n  });\n  if (!inputIsValid) return arr;\n  const nextArr = [...arr];\n  nextArr.splice(startIndex, count);\n  return nextArr;\n};\n\nconst randomArr = (arr, amount) => {\n  if (!isArr(arr)) return arr;\n  const useAmount = amount || 1;\n  const randoms = [];\n  for (let i = 0; i < useAmount; i++) {\n    randoms.push(arr[Math.floor(Math.random() * arr.length)]);\n  }\n  return !amount ? randoms[0] : randoms;\n};\n\nconst randomizeArr = arr => !isArr(arr) && arr || arr.sort(() => 0.5 - Math.random());\n\nconst uniqArrByReference = arr => {\n  return !isArr(arr) ? arr : arr.filter((e, i, arr) => arr.indexOf(e) == i);\n};\nconst uniqArr = (arr, selector) => {\n  if (!selector) return uniqArrByReference(arr);\n  const {\n    unique\n  } = arr.reduce((data, element) => {\n    const id = selector(element);\n    !data.set.has(id) && data.unique.push(element);\n    data.set.add(id);\n    return data;\n  }, {\n    unique: [],\n    set: new Set()\n  });\n  return unique;\n};\n\nexport { areCountMapsEqual as a, buildElementCountMap as b, areFrequencyEqual as c, areSetEqual as d, cloneArr as e, eitherArr as f, ensureArr as g, flatArr as h, flatMap as i, findExtrema as j, findMax as k, findMin as l, randomizeArr as m, uniqArr as n, omitRange as o, randomArr as r, uniqArrByReference as u };\n//# sourceMappingURL=uniqArr-d83b2468.js.map\n","import { i as isArr } from './isArr-a4420764.js';\nimport { i as isFunc } from './isFunc-40ceeef8.js';\n\nconst applyToFunc = (item, expression) => {\n  if (isArr(expression)) {\n    const [func, ...args] = expression;\n    return func(item, ...args);\n  } else if (isFunc(expression)) {\n    return expression(item);\n  } else {\n    console.error(`Pipeline expected either a function or an array (for function expressions). Found ${typeof expression}`);\n    return item;\n  }\n};\n\nconst pipeline = (item, ...functions) => {\n  return functions.reduce((result, fn) => applyToFunc(result, fn), item);\n};\n\nconst hasOwn = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\n\nexport { applyToFunc as a, hasOwn as h, pipeline as p };\n//# sourceMappingURL=hasOwn-deb5bbb8.js.map\n","const isColl = val => typeof val === 'object' && val !== null;\n\nexport { isColl as i };\n//# sourceMappingURL=isColl-15a1452b.js.map\n","import { i as isArr } from './isArr-a4420764.js';\nimport { i as isFunc } from './isFunc-40ceeef8.js';\nimport { i as isColl } from './isColl-15a1452b.js';\n\nconst updateColl = (obj, path, type, val) => {\n  const org = obj;\n  if (!isColl(obj) || !obj || !path) return type !== 'set' && val || undefined;\n  const parts = isArr(path) ? Array.from(path) : path.split('.');\n  const key = parts.pop();\n  let prop;\n  let breakPath;\n  while (prop = parts.shift()) {\n    const next = obj[prop];\n    isColl(next) || isFunc(next) ? obj = next : (() => {\n      if (type === 'set') obj[prop] = {};else breakPath = true;\n      obj = obj[prop];\n    })();\n    if (breakPath) return val;\n  }\n  return type === 'get'\n  ? key in obj ? obj[key] : val : type === 'unset'\n  ? delete obj[key] :\n  (obj[key] = val) && org || org;\n};\n\nconst get = (obj, path, fallback) => updateColl(obj, path, 'get', fallback);\n\nexport { get as g, updateColl as u };\n//# sourceMappingURL=get-8e62f069.js.map\n","import { i as isArr } from './isArr-a4420764.js';\nimport { i as isFunc } from './isFunc-40ceeef8.js';\nimport { g as get } from './get-8e62f069.js';\n\nconst cloneFunc = func => {\n  const funcClone = function (...args) {\n    return func instanceof funcClone ? (() => {\n      return new func(...args);\n    })() : get(func.prototype, 'constructor.name') ? new func(...args) : func.apply(func, args);\n  };\n  for (let key in func) func.hasOwnProperty(key) && (funcClone[key] = func[key]);\n  Object.defineProperty(funcClone, 'name', {\n    value: func.name,\n    configurable: true\n  });\n  funcClone.toString = () => func.toString();\n  return funcClone;\n};\n\nconst deepClone = (obj, hash = new WeakMap()) => {\n  if (Object(obj) !== obj) return obj;\n  if (obj instanceof Set) return new Set(obj);\n  if (hash.has(obj)) return hash.get(obj);\n  if (isArr(obj)) return obj.map(x => deepClone(x));\n  if (isFunc(obj)) return cloneFunc(obj);\n  const result = obj instanceof Date ? new Date(obj) : obj instanceof RegExp ? new RegExp(obj.source, obj.flags) : !obj.constructor ? Object.create(null) : null;\n  if (result === null) return cloneObjWithPrototypeAndProperties(obj);\n  hash.set(obj, result);\n  if (obj instanceof Map) return Array.from(obj, ([key, val]) => result.set(key, deepClone(val, hash)));\n  return Object.assign(result, ...Object.keys(obj).map(key => ({\n    [key]: deepClone(obj[key], hash)\n  })));\n};\nconst cloneObjWithPrototypeAndProperties = objectWithPrototype => {\n  if (!objectWithPrototype) return objectWithPrototype;\n  const prototype = Object.getPrototypeOf(objectWithPrototype);\n  const sourceDescriptors = Object.getOwnPropertyDescriptors(objectWithPrototype);\n  for (const [key, descriptor] of Object.entries(sourceDescriptors)) {\n    descriptor.value && (sourceDescriptors[key].value = deepClone(descriptor.value));\n  }\n  const clone = Object.create(prototype, sourceDescriptors);\n  if (Object.isFrozen(objectWithPrototype)) Object.freeze(clone);\n  if (Object.isSealed(objectWithPrototype)) Object.seal(clone);\n  return clone;\n};\n\nexport { cloneFunc as a, cloneObjWithPrototypeAndProperties as c, deepClone as d };\n//# sourceMappingURL=deepClone-8a68e415.js.map\n","import { i as isArr } from './isArr-a4420764.js';\nimport { i as isObj } from './isObj-2a71d1af.js';\nimport { i as isStr } from './isStr-481ce69b.js';\nimport { i as isNum } from './isNum-cc6ad9ca.js';\n\nconst isEmpty = val => isObj(val) ? Object.keys(val).length === 0 : isArr(val) ? val.length === 0 : isStr(val) ? val.trim().length === 0 : isNum(val) ? val < 1 : false;\n\nexport { isEmpty as i };\n//# sourceMappingURL=isEmpty-324adee6.js.map\n","import { v as validate } from './validate-0eec5ac6.js';\nimport { i as isArr } from './isArr-a4420764.js';\nimport { i as isObj } from './isObj-2a71d1af.js';\nimport { i as isFunc } from './isFunc-40ceeef8.js';\nimport { h as hasOwn } from './hasOwn-deb5bbb8.js';\nimport { i as isStr } from './isStr-481ce69b.js';\nimport { i as isNum } from './isNum-cc6ad9ca.js';\nimport { d as deepClone } from './deepClone-8a68e415.js';\nimport { i as isEmpty } from './isEmpty-324adee6.js';\n\nconst checkCall = (method, ...params) => {\n  return isFunc(method) ? method(...params) : undefined;\n};\n\nconst complement = predicate => {\n  const [valid] = validate({\n    predicate\n  }, {\n    predicate: isFunc\n  });\n  return valid ? (...args) => !predicate(...args) : null;\n};\n\nconst eitherFunc = (func1, func2) => isFunc(func1) && func1 || func2;\n\nconst debounce = (func, wait = 250, immediate = false) => {\n  let timeout;\n  function wrapFunc(...args) {\n    if (!isFunc(func)) return null;\n    const context = this;\n    const later = () => {\n      timeout = null;\n      !immediate && func.apply(context, args);\n    };\n    const callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) return isFunc(func) && func.apply(context, args);\n  }\n  return wrapFunc;\n};\n\nconst doIt = (...args) => {\n  const params = args.slice();\n  const num = params.shift();\n  const bindTo = params.shift();\n  const cb = params.pop();\n  if (!isNum(num) || !isFunc(cb)) return [];\n  const doItAmount = new Array(num);\n  const responses = [];\n  for (let i = 0; i < doItAmount.length; i++) {\n    const data = cb.call(bindTo, i, ...params);\n    if (data === false) break;\n    responses.push(data);\n  }\n  return responses;\n};\n\nconst hasDomAccess = () => {\n  try {\n    return !!(typeof window !== 'undefined' && window.document && window.document.createElement);\n  } catch (error) {\n    return false;\n  }\n};\n\nconst memorize = (func, getCacheKey, limit = 1) => {\n  if (!isFunc(func) || getCacheKey && !isFunc(getCacheKey)) return console.error('Error: Expected a function', func, getCacheKey);\n  let memorized = function () {\n    const cache = memorized.cache;\n    const key = getCacheKey ? getCacheKey.apply(this, arguments) : arguments[0];\n    if (hasOwn(cache, key)) return cache[key];\n    const result = func.apply(this, arguments);\n    isNum(limit) && Object.keys(cache).length < limit ? cache[key] = result : memorized.cache = {\n      [key]: result\n    };\n    return result;\n  };\n  memorized.cache = {};\n  memorized.destroy = () => {\n    getCacheKey = undefined;\n    memorized.cache = undefined;\n    memorized.destroy = undefined;\n    memorized = undefined;\n  };\n  return memorized;\n};\n\nconst runSeq = async (asyncFns = [], options = {}) => {\n  const [valid] = validate({\n    asyncFns\n  }, {\n    asyncFns: isArr\n  });\n  if (!valid) return [];\n  const {\n    cloneResults = false,\n    returnOriginal = true\n  } = options;\n  const results = [];\n  for (const fn of asyncFns) {\n    const result = isFunc(fn) ? await fn(results.length, cloneResults ? deepClone(results) : results) : returnOriginal ? fn : undefined;\n    results.push(result);\n  }\n  return results;\n};\n\nconst timedRun = async (fn, ...args) => {\n  const [valid] = validate({\n    fn\n  }, {\n    fn: isFunc\n  });\n  if (!valid) return [undefined, -1];\n  const startTime = new Date();\n  const result = await fn(...args);\n  return [result, new Date() - startTime];\n};\n\nconst throttle = (func, wait = 100) => {\n  let waiting = false;\n  return function (...args) {\n    if (waiting) return;\n    waiting = true;\n    func.apply(this, args);\n    return setTimeout(() => {\n      waiting = false;\n    }, wait);\n  };\n};\n\nconst throttleLast = (func, cb, wait = 100) => {\n  let throttleTimeout;\n  return function (...args) {\n    if (throttleTimeout) clearTimeout(throttleTimeout);\n    throttleTimeout = setTimeout(() => {\n      func.apply(this, args);\n      clearTimeout(throttleTimeout);\n    }, wait);\n    typeof cb === 'function' && cb();\n  };\n};\n\nconst limbo = promise => {\n  return !promise || !isFunc(promise.then) ? [new Error(`A promise or thenable is required as the first argument!`), null] : promise.then(data => [null, data]).catch(err => [err, undefined]);\n};\n\nconst uuid = a => a ? (a ^ Math.random() * 16 >> a / 4).toString(16) : ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, uuid);\n\nconst parseErrorMessage = exception => {\n  return isStr(exception) && !isEmpty(exception) ? exception : isObj(exception) ? exception.message : null;\n};\n\nexport { complement as a, doIt as b, checkCall as c, debounce as d, eitherFunc as e, throttle as f, throttleLast as g, hasDomAccess as h, limbo as l, memorize as m, parseErrorMessage as p, runSeq as r, timedRun as t, uuid as u };\n//# sourceMappingURL=parseErrorMessage-0a52f8cc.js.map\n","import { i as isStr } from './isStr-481ce69b.js';\n\nconst toStr = val => val === null || val === undefined ? '' : isStr(val) ? val : JSON.stringify(val);\n\nexport { toStr as t };\n//# sourceMappingURL=toStr-0e5fe94c.js.map\n","import { i as isArr } from './isArr-a4420764.js';\nimport { i as isFunc } from './isFunc-40ceeef8.js';\nimport { i as isStr } from './isStr-481ce69b.js';\nimport { t as toStr$1 } from './toStr-0e5fe94c.js';\nimport { i as isNonNegative } from './isNonNegative-76ec0014.js';\nimport { i as isColl } from './isColl-15a1452b.js';\nimport { g as get } from './get-8e62f069.js';\n\nconst buildPath = (...args) => {\n  const built = args.reduce((path, arg) => {\n    let str = toStr(arg);\n    return `${path}${str && '/' + str || ''}`;\n  }, '');\n  return built.replace(/([^:\\/]|^)\\/{2,}/g, '$1/');\n};\n\nconst mapString = (str, charMapper) => {\n  if (!isStr(str)) return str;\n  if (!isFunc(charMapper)) return str;\n  let result = \"\";\n  for (const char of str) {\n    result += charMapper(char);\n  }\n  return result;\n};\n\nconst isLowerCase = str => str === str.toLowerCase();\n\nconst isUpperCase = str => str === str.toUpperCase();\n\nconst delimitString = (str, delimiter, delimiters = ['-', '_', ' ']) => {\n  if (!isStr(str)) return str;\n  const isDelimiter = c => delimiters.some(del => del === c);\n  let prevChar = '_';\n  return mapString(str, char => {\n    if (isDelimiter(char)) {\n      prevChar = delimiter;\n      return delimiter;\n    }\n    if (isUpperCase(char) && isLowerCase(prevChar) && !isDelimiter(prevChar)) {\n      prevChar = char;\n      return delimiter + char;\n    }\n    prevChar = char;\n    return char;\n  });\n};\n\nconst snakeCase = str => {\n  const underscored = delimitString(str, '_');\n  return underscored.toLowerCase();\n};\n\nconst capitalize = (str, lowercaseTail = true) => {\n  if (!isStr(str) || !str[0]) return str;\n  const tail = lowercaseTail ? str.slice(1).toLowerCase() : str.slice(1);\n  return `${str[0].toUpperCase()}${tail}`;\n};\n\nconst removeDot = string => {\n  const noDot = string.indexOf('.') === 0 ? string.slice(1) : string;\n  return noDot.indexOf('.') === noDot.length - 1 ? noDot.slice(0, -1) : noDot;\n};\n\nconst cleanStr = str => {\n  return str && removeDot(str).replace(/[-_]/gm, ' ') || str;\n};\n\nconst camelCase = (str, compCase) => {\n  return str && cleanStr(str).split(/[\\s_-]/gm).reduce((cased, word, index) => {\n    if (!word) return cased;\n    cased += (index > 0 || compCase) && capitalize(word) || word.toLowerCase();\n    return cased;\n  }, '') || str;\n};\n\nconst camelCasePath = path => {\n  const split = path.split('.');\n  const camelCasedSplit = split.map((str, idx) => idx > 0 ? capitalize(str, false) : str);\n  return camelCasedSplit.length > 1 ? camelCasedSplit.join('') : path;\n};\n\nconst containsStr = (str, substring, fromIndex) => {\n  str = !isStr(str) && toStr$1(str) || str;\n  substring = !isStr(substring) && toStr$1(substring) || substring;\n  return str.indexOf(substring, fromIndex) !== -1;\n};\n\nconst eitherStr = (str1, str2) => isStr(str1) && str1 || str2;\n\nconst uppercasePattern = /[A-Z]/g;\nconst msPattern = /^ms-/;\nconst hyphenCache = {};\nconst toHyphenLower = match => '-' + match.toLowerCase();\nconst hyphenator = rule => {\n  if (hyphenCache.hasOwnProperty(rule)) return hyphenCache[rule];\n  const hRule = rule.replace(uppercasePattern, toHyphenLower);\n  return hyphenCache[rule] = msPattern.test(hRule) ? '-' + hRule : hRule;\n};\n\nconst hashString = (str, maxLength) => {\n  if (!isStr(str) || str.length == 0) return 0;\n  str = str.split('').reverse().join('');\n  let hash = 0;\n  for (let i = 0; i < str.length; i++) {\n    const char = str.charCodeAt(i);\n    hash = (hash << 5) - hash + char;\n    hash = `${Math.abs(hash & hash)}`;\n  }\n  return isNonNegative(maxLength) ? hash.slice(0, maxLength) : hash;\n};\n\nconst isEmail = str => {\n  if (!str || !isStr(str)) return false;\n  const regex = /^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,3})+$/;\n  return Boolean(regex.test(str));\n};\n\nconst isPhone = str => {\n  if (!str || !isStr(str)) return false;\n  const regex = /^[\\+]?[(]?[0-9]{3}[)]?[-\\s\\.]?[0-9]{3}[-\\s\\.]?[0-9]{4,6}$/im;\n  return Boolean(regex.test(str)) && str.replace(/\\D/g, '').length < 11;\n};\n\nconst isUrl = str => {\n  const regex = /^(?:(?:https?|ftp):\\/\\/)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:\\/\\S*)?$/;\n  return Boolean(regex.test(str));\n};\n\nconst isUuid = str => {\n  if (!str || !isStr(str)) return false;\n  const regex = /^[0-9A-F]{8}-[0-9A-F]{4}-[4][0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i;\n  return Boolean(regex.test(str));\n};\n\nconst parseJSON = str => {\n  try {\n    return JSON.parse(str);\n  } catch (e) {\n    console.error(e.message);\n    return null;\n  }\n};\n\nconst plural = str => {\n  if (!str || !str.length) return str;\n  return str[str.length - 1] !== 's' ? str + 's' : str;\n};\n\nconst singular = str => {\n  if (!str || !str.length) return str;\n  return str[str.length - 1] === 's' ? str.slice(0, str.length - 1) : str;\n};\n\nconst styleCase = str => {\n  if (!isStr(str)) return str;\n  const cased = camelCase(str);\n  return `${cased[0].toLowerCase()}${cased.slice(1)}`;\n};\n\nconst trainCase = str => isStr(str) && str.split(/(?=[A-Z])|[\\s_-]/gm).join('-').toLowerCase() || str;\n\nconst wordCaps = str => {\n  if (!isStr(str)) return str;\n  let cleaned = cleanStr(str);\n  return cleaned.split(' ').map(word => word && capitalize(word) || '').join(' ');\n};\n\nconst spaceJoin = (original, toAdd) => {\n  toAdd = isArr(toAdd) ? toAdd : [toAdd];\n  return toAdd.reduce((joined, item) => {\n    return isStr(item) ? `${joined ? joined + ' ' : ''}${item}`.trim() : joined;\n  }, isStr(original) ? original : '');\n};\n\nconst template = (tempStr, data, fallback = '') => {\n  data = isColl(data) && data || {};\n  const regex = template.regex || /\\${(.*?)\\}/g;\n  return isStr(tempStr) ? tempStr.replace(regex, (match, exact) => {\n    const path = (exact || match.substr(2, match.length - 3)).trim();\n    const replaceWith = get(data, path, fallback);\n    return isFunc(replaceWith) ? replaceWith(data, path, fallback) : replaceWith;\n  }) : console.error(`template requires a string as the first argument`) || tempStr;\n};\n\nconst validFilename = fileName => {\n  if (!fileName) return false;\n  const regex = /[<>:\"/\\\\|?*\\u0000-\\u001F]/g;\n  const windowsRegex = /^(con|prn|aux|nul|com\\d|lpt\\d)$/i;\n  const periodRegex = /^\\.\\.?$/;\n  return regex.test(fileName) || windowsRegex.test(fileName) || periodRegex.test(fileName) ? false : true;\n};\n\nconst quoteSymbols = ['\\\"', '\\''];\nconst isQuoted = (str, quotes = quoteSymbols) => {\n  return isStr(str) && quotes.some(quote => str.startsWith(quote) && str.endsWith(quote));\n};\n\nconst reverseStr = str => {\n  if (!isStr(str)) return undefined;\n  let reversed = '';\n  for (let char of str) {\n    reversed = char + reversed;\n  }\n  return reversed;\n};\n\nconst getNearestDelimiterIndex = (text, index, delimiters) => {\n  const indices = delimiters.map(str => text.indexOf(str, index)).sort();\n  return indices.find(idx => idx >= 0);\n};\nconst getWordStartingAt = (text, index, delimiters = [' ']) => {\n  const endingSpaceIdx = getNearestDelimiterIndex(text, index, delimiters);\n  return text.substring(index, endingSpaceIdx === -1 ? text.length : endingSpaceIdx);\n};\n\nconst getWordEndingAt = (text, index, delimiters = [' ']) => {\n  const reversed = reverseStr(text);\n  const reversedIndex = text.length - index;\n  return reverseStr(getWordStartingAt(reversed, reversedIndex, delimiters));\n};\n\nexport { template as A, validFilename as B, isQuoted as C, reverseStr as D, getWordEndingAt as E, getNearestDelimiterIndex as F, getWordStartingAt as G, cleanStr as a, buildPath as b, camelCase as c, delimitString as d, capitalize as e, camelCasePath as f, containsStr as g, eitherStr as h, hyphenator as i, hashString as j, isEmail as k, isPhone as l, mapString as m, isUrl as n, isUuid as o, parseJSON as p, plural as q, removeDot as r, snakeCase as s, singular as t, styleCase as u, trainCase as v, wordCaps as w, isUpperCase as x, isLowerCase as y, spaceJoin as z };\n//# sourceMappingURL=getWordEndingAt-6d1f9d3c.js.map\n","import { i as isStr } from './isStr-481ce69b.js';\n\nconst sanitize = str => isStr(str) && str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;') || str;\n\nexport { sanitize as s };\n//# sourceMappingURL=sanitize-2f5be6f2.js.map\n","import { t as toStr } from './toStr-0e5fe94c.js';\nimport { i as isBool } from './isBool-4d844d9e.js';\n\nconst isStrBool = val => val === 'false' || val === 'true';\n\nconst convertToStrBool = val => isBool(val) ? toStr(val) : !val || val === 'false' || val === '0' ? 'false' : 'true';\n\nconst toBool = val => isStrBool(val) ? val === 'true' : convertToStrBool(val) === 'true';\n\nexport { convertToStrBool as c, isStrBool as i, toBool as t };\n//# sourceMappingURL=toBool-8f49e620.js.map\n","const softFalsy = val => Boolean(val || val === '' || val === 0);\n\nexport { softFalsy as s };\n//# sourceMappingURL=softFalsy-b9d5bbac.js.map\n","import { t as toStr } from './toStr-0e5fe94c.js';\nimport { i as isNum, e as equalsNaN } from './isNum-cc6ad9ca.js';\n\nconst getNums = val => toStr(val).replace(/([^.\\d])/gm, '');\n\nconst toNum = val => isNum(val) ? val : val && !equalsNaN(val) && Number(getNums(val)) || 0;\n\nexport { getNums as g, toNum as t };\n//# sourceMappingURL=toNum-db57d125.js.map\n","import { i as isNum, e as equalsNaN } from './isNum-cc6ad9ca.js';\nimport { g as getNums, t as toNum } from './toNum-db57d125.js';\n\nconst isNegative = x => isNum(x) && x < 0;\n\nconst isPositive = x => isNum(x) && x > 0;\n\nconst isFloat = val => isNum(val) && val % 1 !== 0;\n\nconst isInt = val => isNum(val) && val % 1 === 0;\n\nconst nth = num => {\n  if (!isNum(num)) {\n    num = getNums(num);\n    if (!num) return '';\n    num = toNum(num);\n    if (equalsNaN(num)) return '';\n  }\n  const mod = num % 100;\n  if (mod >= 10 && mod <= 20) return 'th';\n  switch (num % 10) {\n    case 1:\n      return 'st';\n    case 2:\n      return 'nd';\n    case 3:\n      return 'rd';\n    default:\n      return 'th';\n  }\n};\n\nconst toFloat = val => val && !equalsNaN(val) && parseFloat(isNum(val) && val || getNums(val)) || 0;\n\nconst toInt = val => val && !equalsNaN(val) && parseInt(isNum(val) && val || getNums(val)) || 0;\n\nexport { isPositive as a, isFloat as b, isInt as c, toInt as d, isNegative as i, nth as n, toFloat as t };\n//# sourceMappingURL=toInt-082bd5f3.js.map\n","import { i as isArr } from './isArr-a4420764.js';\nimport { i as isObj } from './isObj-2a71d1af.js';\nimport { i as isFunc } from './isFunc-40ceeef8.js';\nimport { i as isStr } from './isStr-481ce69b.js';\nimport { i as isNum } from './isNum-cc6ad9ca.js';\nimport { i as isColl } from './isColl-15a1452b.js';\nimport { u as updateColl, g as get } from './get-8e62f069.js';\nimport { d as deepClone } from './deepClone-8a68e415.js';\n\nconst cleanColl = (coll, recursive = true) => {\n  return isColl(coll) ? Object.keys(coll).reduce((cleaned, key) => {\n    const value = coll[key];\n    if (value === null || value === undefined) return cleaned;\n    cleaned[key] = recursive && isColl(value) ? cleanColl(value) : value;\n    return cleaned;\n  }, isObj(coll) && {} || []) : console.error(`cleanColl requires a collection as the first argument`) || coll;\n};\n\nconst isEmptyColl = obj => isArr(obj) ? obj.length === 0 : isColl(obj) && Object.getOwnPropertyNames(obj).length === 0;\n\nconst mapColl = (coll, cb) => isFunc(cb) && isColl(coll) ? Object.keys(coll).map(key => cb(key, coll[key], coll)) : isArr(coll) ? [] : {};\n\nconst reduceColl = (coll, cb, reduce) => isFunc(cb) && isColl(coll) ? Object.keys(coll).reduce((data, key) => cb(key, coll[key], coll, data), reduce) : isArr(coll) ? [] : {};\n\nconst unset = (obj, path) => updateColl(obj, path, 'unset');\n\nconst isArray = Array.isArray;\nconst keyList = Object.keys;\nconst hasProp = Object.prototype.hasOwnProperty;\nconst deepEqual = (a, b) => {\n  if (a === b) return true;\n  if (!a || !b || typeof a != 'object' || typeof b != 'object') return a !== a && b !== b;\n  const arrA = isArray(a);\n  const arrB = isArray(b);\n  let i;\n  let length;\n  let key;\n  if (arrA && arrB) {\n    length = a.length;\n    if (length != b.length) return false;\n    for (i = length; i-- !== 0;) if (!deepEqual(a[i], b[i])) return false;\n    return true;\n  }\n  if (arrA != arrB) return false;\n  const dateA = a instanceof Date;\n  const dateB = b instanceof Date;\n  if (dateA != dateB) return false;\n  if (dateA && dateB) return a.getTime() == b.getTime();\n  const regexpA = a instanceof RegExp;\n  const regexpB = b instanceof RegExp;\n  if (regexpA != regexpB) return false;\n  if (regexpA && regexpB) return a.toString() == b.toString();\n  const keys = keyList(a);\n  length = keys.length;\n  if (length !== keyList(b).length) return false;\n  for (i = length; i-- !== 0;) if (!hasProp.call(b, keys[i])) return false;\n  for (i = length; i-- !== 0;) {\n    key = keys[i];\n    if (!deepEqual(a[key], b[key])) return false;\n  }\n  return true;\n};\n\nconst repeat = (element, times, cloneDeep = false) => {\n  if (!times || times <= 0) return [];\n  if (!isNum(times)) {\n    console.error(\"Times argument must be a number\");\n    return [];\n  }\n  const arr = [];\n  for (let i = 0; i < times; i++) {\n    const value = isFunc(element) ? element() : cloneDeep ? deepClone(element) : element;\n    arr.push(value);\n  }\n  return arr;\n};\n\nconst shallowEqual = (col1, col2, path) => {\n  if (path && (isArr(path) || isStr(path))) {\n    col1 = get(col1, path);\n    col2 = get(col2, path);\n  }\n  if (col1 === col2) return true;\n  if (!col1 || !isColl(col1) || !col2 || !isColl(col2)) return false;\n  if (Object.keys(col1).length !== Object.keys(col2).length) return false;\n  for (const key in col1) if (col1[key] !== col2[key]) return false;\n  return true;\n};\n\nexport { repeat as a, cleanColl as c, deepEqual as d, isEmptyColl as i, mapColl as m, reduceColl as r, shallowEqual as s, unset as u };\n//# sourceMappingURL=shallowEqual-a7f44ae7.js.map\n","import { u as updateColl } from './get-8e62f069.js';\n\nconst set = (obj, path, val) => updateColl(obj, path, 'set', val);\n\nexport { set as s };\n//# sourceMappingURL=set-75e278f2.js.map\n","import { i as isFunc } from './isFunc-40ceeef8.js';\nimport { s as softFalsy } from './softFalsy-b9d5bbac.js';\n\nconst either = (val1, val2, check) => !isFunc(check) ? softFalsy(val1) && val1 || val2 : check(val1, val2) && val1 || val2;\n\nconst isSame = (val1, val2) => val1 === val2 ? val1 !== 0 || 1 / val1 === 1 / val2 : val1 !== val1 && val2 !== val2;\n\nconst isValidDate = date => !isNaN((date instanceof Date && date || new Date(date)).getTime());\n\nexport { isValidDate as a, either as e, isSame as i };\n//# sourceMappingURL=isValidDate-7279a0a9.js.map\n","import { i as isStr } from './isStr-481ce69b.js';\nimport { i as isNum } from './isNum-cc6ad9ca.js';\nimport { i as isStrBool, t as toBool } from './toBool-8f49e620.js';\nimport { t as toNum } from './toNum-db57d125.js';\n\nconst strToType = val => {\n  return !val || !isStr(val) ? val : isStrBool(val) ? toBool(val) : isNum(val) ? toNum(val) : (() => {\n    try {\n      return JSON.parse(val);\n    } catch (e) {\n      return val;\n    }\n  })();\n};\n\nexport { strToType as s };\n//# sourceMappingURL=strToType-0d2d490d.js.map\n","let SHOW_LOGS;\nlet METH_DEF = 'dir';\nlet PREFIX = 'type';\nconst LOG_TYPES = ['error', 'info', 'log', 'dir', 'warn'];\nconst setLogs = (log, methDef, prefix) => {\n  SHOW_LOGS = log;\n  METH_DEF = methDef || METH_DEF || 'log';\n  PREFIX = prefix || PREFIX || 'type';\n};\nconst resetLogs = () => {\n  SHOW_LOGS = undefined;\n  METH_DEF = 'log';\n  PREFIX = 'type';\n};\nconst logData = (...args) => {\n  if (!args.length) return;\n  let type = args.length === 1 ? METH_DEF : args.pop();\n  if (!SHOW_LOGS && type !== 'error') return;else if (typeof args[0] === 'string') {\n    if (PREFIX === 'type') args[0] = `[ ${type.toUpperCase()} ] ${args[0]}`;else if (PREFIX) args[0] = `${PREFIX} ${args[0]}`;\n  }\n  LOG_TYPES.indexOf(type) !== -1 ? console[type](...args) : console[METH_DEF](...args, type);\n};\n\nexport { logData as l, resetLogs as r, setLogs as s };\n//# sourceMappingURL=log-8543c007.js.map\n","import { i as isObj } from './isObj-2a71d1af.js';\nimport { i as isFunc } from './isFunc-40ceeef8.js';\n\nconst reduceObj = (obj, cb, start = {}) => isObj(obj) && isFunc(cb) && Object.entries(obj).reduce((data, [key, value]) => cb(key, value, data), start) || start;\n\nexport { reduceObj as r };\n//# sourceMappingURL=reduceObj-7d9f0ad1.js.map\n","import { i as isArr } from './isArr-a4420764.js';\nimport { i as isObj } from './isObj-2a71d1af.js';\nimport { i as isFunc } from './isFunc-40ceeef8.js';\nimport { p as pipeline } from './hasOwn-deb5bbb8.js';\nimport { i as isStr } from './isStr-481ce69b.js';\nimport { i as isNum } from './isNum-cc6ad9ca.js';\nimport { s as sanitize } from './sanitize-2f5be6f2.js';\nimport { i as isColl } from './isColl-15a1452b.js';\nimport { t as toBool } from './toBool-8f49e620.js';\nimport { d as deepClone, a as cloneFunc } from './deepClone-8a68e415.js';\nimport { s as set } from './set-75e278f2.js';\nimport { s as strToType } from './strToType-0d2d490d.js';\nimport { l as logData } from './log-8543c007.js';\nimport { r as reduceObj } from './reduceObj-7d9f0ad1.js';\n\nconst cloneJson = obj => {\n  try {\n    return JSON.parse(JSON.stringify(obj));\n  } catch (e) {\n    logData(e.message, 'error');\n    return null;\n  }\n};\n\nconst clearObj = (obj, filter) => {\n  obj && Object.entries(obj).map(([key, value]) => {\n    if (filter && filter.indexOf(key) !== -1) return;\n    if (typeof value === 'object') clearObj(value);\n    obj[key] = undefined;\n    delete obj[key];\n  });\n};\n\nconst eitherObj = (obj1, obj2) => isObj(obj1) && obj1 || obj2;\n\nconst deepMerge = (...sources) => {\n  return sources.reduce((merged, source) => {\n    const srcCopy = deepClone(source);\n    return isArr(srcCopy)\n    ? [...(isArr(merged) && merged || []), ...srcCopy]\n    : isObj(srcCopy)\n    ? Object.entries(srcCopy).reduce((joined, [key, value]) => ({ ...joined,\n      [key]: isFunc(value) ? cloneFunc(value)\n      : isColl(value) && key in joined\n      ? deepMerge(joined[key], value)\n      : deepClone(value)\n    }), merged)\n    : merged;\n  }, isArr(sources[0]) && [] || {});\n};\n\nconst applyToCloneOf = (obj, mutatorCb) => {\n  let error;\n  if (!obj) error = 'object (Argument 1) in applyToCloneOf, must be defined!';\n  if (!isObj(obj)) error = 'object (Argument 1) in applyToCloneOf, must be an object!';\n  if (!mutatorCb) error = 'mutator (Argument 2) in applyToCloneOf, must be defined!';\n  if (!isFunc(mutatorCb)) error = 'mutator (Argument 2) arg in applyToCloneOf, must be a function!';\n  if (error) return console.warn(error) || obj;\n  const clone = deepClone(obj);\n  mutatorCb(clone);\n  return clone;\n};\n\nconst jsonEqual = (one, two) => {\n  try {\n    return JSON.stringify(one) === JSON.stringify(two);\n  } catch (e) {\n    return false;\n  }\n};\n\nconst isEntry = maybeEntry => isArr(maybeEntry) && maybeEntry.length === 2 && (isNum(maybeEntry[0]) || isStr(maybeEntry[0]));\n\nconst mapEntries = (obj, cb) => {\n  if (!isArr(obj) && !isObj(obj)) {\n    console.error(obj, `Expected array or object for obj. Found ${typeof obj}`);\n    return obj;\n  }\n  if (!isFunc(cb)) {\n    console.error(`Expected function for cb. Found ${typeof cb}`);\n    return obj;\n  }\n  const entries = Object.entries(obj);\n  const initialValue = isArr(obj) ? [] : {};\n  return entries.reduce((obj, [key, value]) => {\n    const result = cb(key, value);\n    if (!isEntry(result)) {\n      console.error(`Callback function must return entry. Found: ${result}. Using current entry instead.`);\n      return set(obj, key, value);\n    }\n    return set(obj, result[0], result[1]);\n  }, initialValue);\n};\n\nconst mapKeys = (obj, keyMapper) => {\n  if (!isObj(obj) || !isFunc(keyMapper)) return obj;\n  return mapEntries(obj, (key, value) => [keyMapper(key), value]);\n};\n\nconst mapObj = (obj, cb) => isObj(obj) && isFunc(cb) && Object.entries(obj).map(([key, value]) => cb(key, value)) || obj;\n\nconst isArrMap = obj => {\n  if (!isObj(obj)) return false;\n  const values = Object.values(obj);\n  return toBool(values.length && values.every(isArr));\n};\n\nconst omitKeys = (obj = {}, keys = []) => isObj(obj) && reduceObj(obj, (key, _, updated) => {\n  keys.indexOf(key) === -1 && (updated[key] = obj[key]);\n  return updated;\n}, {}) || {};\n\nconst pickKeys = (obj = {}, keys = []) => isObj(obj) && keys.reduce((updated, key) => {\n  key in obj && (updated[key] = obj[key]);\n  return updated;\n}, {}) || {};\n\nconst sanitizeCopy = obj => JSON.parse(sanitize(JSON.stringify(obj)));\n\nconst trimStringFields = object => Object.entries(object).reduce((cleaned, [key, value]) => {\n  cleaned[key] = isStr(value) ? value.trim() : value;\n  return cleaned;\n}, object);\n\nconst toObj = (val, divider, split) => {\n  if (isArr(val)) return Object.keys(val).reduce((obj, key) => {\n    obj[key] = val[key];\n    return obj;\n  }, {});\n  if (!isStr(str)) return {};\n  divider = divider || '=';\n  split = split || '&';\n  return str.split(split).reduce((obj, item) => {\n    const sep = item.split(divider);\n    obj[sep[0].trim()] = strToType(sep[1].trim());\n    return obj;\n  }, {});\n};\n\nconst keyMap = (arr, toUpperCase) => isArr(arr) && arr.reduce((obj, key) => {\n  if (!isStr(key)) return obj;\n  const use = toUpperCase && key.toUpperCase() || key;\n  obj[use] = use;\n  return obj;\n}, {}) || {};\n\nconst everyEntry = (obj, predicate) => {\n  if (!obj) {\n    console.error(`everyEntry expects argument obj [${obj}] to be defined.`);\n    return false;\n  }\n  if (!isObj(obj)) {\n    console.error(`Argument obj ${obj} must be an object.`);\n    return false;\n  }\n  if (!isFunc(predicate)) {\n    console.error(`Argument 'predicate' passed into everyEntry must a function. Found: ${predicate}`);\n    return false;\n  }\n  return pipeline(obj, Object.entries, entries => entries.every(([key, value]) => predicate(key, value)));\n};\n\nconst someEntry = (obj, predicate) => {\n  if (!obj) {\n    console.error(`someEntry expects argument obj [${obj}] to be defined.`);\n    return false;\n  }\n  if (!isObj(obj)) {\n    console.error(`Argument obj ${obj} must be an object.`);\n    return false;\n  }\n  if (!isFunc(predicate)) {\n    console.error(`Argument 'predicate' passed into someEntry must a function. Found: ${predicate}`);\n    return false;\n  }\n  return pipeline(obj, Object.entries, entries => entries.some(([key, value]) => predicate(key, value)));\n};\n\nconst filterObj = (obj, predicate) => {\n  if (!obj) return obj;\n  if (!isObj(obj)) {\n    console.error(`Object ${obj} was not an object. It must be for filterObject`);\n    return obj;\n  }\n  if (!isFunc(predicate)) {\n    console.error(`Argument 'predicate' passed into filterObject must a function. Found: ${predicate}`);\n    return obj;\n  }\n  return reduceObj(obj, (key, value, data) => {\n    if (predicate(key, value)) data[key] = value;\n    return data;\n  }, {});\n};\n\nexport { clearObj as a, applyToCloneOf as b, cloneJson as c, deepMerge as d, eitherObj as e, mapKeys as f, mapObj as g, isArrMap as h, isEntry as i, jsonEqual as j, toObj as k, keyMap as l, mapEntries as m, everyEntry as n, omitKeys as o, pickKeys as p, someEntry as q, filterObj as r, sanitizeCopy as s, trimStringFields as t };\n//# sourceMappingURL=filterObj-15604392.js.map\n","import { i as isObj } from './isObj-2a71d1af.js';\nimport { i as isFunc } from './isFunc-40ceeef8.js';\n\nconst promisify = method => {\n  if (!isFunc(method)) throw `Argument must be a function`;\n  return (...args) => {\n    return new Promise((res, rej) => {\n      if (!isFunc(args[args.length - 1])) return res(method(...args));\n      args.pop();\n      args.push((...cbData) => {\n        return cbData && cbData[0] ? rej(...cbData) : res(...cbData);\n      });\n      return method(...args);\n    });\n  };\n};\n\nconst defObjProps = Array.from(['caller', 'callee', 'arguments', 'apply', 'bind', 'call', 'toString', '__proto__', '__defineGetter__', '__defineSetter__', 'hasOwnProperty', '__lookupGetter__', '__lookupSetter__', 'isPrototypeOf', 'propertyIsEnumerable', 'valueOf', 'toLocaleString']).concat(Object.getOwnPropertyNames(Object.prototype)).reduce((map, functionName) => {\n  map[functionName] = true;\n  return map;\n}, {});\nconst addAsync = object => {\n  if (!object.__IS_PROMISIFIED__) {\n    for (const prop of Object.getOwnPropertyNames(object)) {\n      const isAsync = prop.indexOf('Async') !== -1 || object[`${prop}Async`];\n      if (isAsync || defObjProps[prop]) continue;\n      if (isFunc(object[prop])) object[`${prop}Async`] = promisify(object[prop]);else {\n        const getValue = Object.getOwnPropertyDescriptor(object, prop).get;\n        if (isFunc(getValue)) object[`${prop}Async`] = promisify(getValue);\n      }\n    }\n    object.__IS_PROMISIFIED__ = true;\n  }\n  return object;\n};\nconst promisifyAll = object => {\n  if (!isObj(object)) return object;\n  addAsync(object);\n  const proto = Object.getPrototypeOf(object);\n  proto && Object.getPrototypeOf(proto) !== null && addAsync(proto);\n  return object;\n};\n\nconst wait = time => new Promise(res => setTimeout(() => res(true), time));\n\nexport { promisifyAll as a, promisify as p, wait as w };\n//# sourceMappingURL=wait-26c5e7c6.js.map\n","import './validate-0eec5ac6.js';\nimport { i as isArr } from './isArr-a4420764.js';\nimport './match-61fbd7dc.js';\nimport { i as isStr } from './isStr-481ce69b.js';\n\nconst isRegex = val => Boolean(val && val instanceof RegExp);\n\nconst getRegexSource = maybeRx => isRegex(maybeRx) ? maybeRx.source : isStr(maybeRx) ? maybeRx : null;\n\nconst parseArgs = args => {\n  if (isArr(args[0])) return [args[0], args[1]];\n  const last = args[args.length - 1];\n  const options = isStr(last) ? last : undefined;\n  const expressions = options ? args.splice(0, args.length - 1) : args;\n  return [expressions, options];\n};\nconst joinRegex = (...args) => {\n  const [expressions, options] = parseArgs(args);\n  const source = expressions.reduce((joined, next) => {\n    const nextSource = getRegexSource(next);\n    return !nextSource ? joined : joined === '' ? nextSource : `${joined}|${nextSource}`;\n  }, '');\n  return new RegExp(`(${source})`, options);\n};\n\nexport { getRegexSource as g, isRegex as i, joinRegex as j };\n//# sourceMappingURL=joinRegex-b645166a.js.map\n","import { v as validate } from './validate-0eec5ac6.js';\nimport { i as isArr } from './isArr-a4420764.js';\nimport { i as isStr } from './isStr-481ce69b.js';\nimport { i as isNum } from './isNum-cc6ad9ca.js';\nimport { i as isColl } from './isColl-15a1452b.js';\nimport { i as isBool } from './isBool-4d844d9e.js';\nimport { r as reduceObj } from './reduceObj-7d9f0ad1.js';\n\nconst queryToObj = string => {\n  const currentQueryItems = {};\n  const stringSplit = string.split('?');\n  const querystring = stringSplit[stringSplit.length - 1];\n  if (!querystring) return currentQueryItems;\n  const split = querystring.split('&');\n  split.length && split.map(item => {\n    const components = item.split('=');\n    if (components.length <= 1) return currentQueryItems;\n    const itemSplit = [components.shift(), components.join('=')];\n    if (itemSplit.length === 2) {\n      const array = decodeURIComponent(itemSplit[1]).split(',');\n      if (array && array.length > 1) currentQueryItems[itemSplit[0]] = array;\n      else if (itemSplit[0] in currentQueryItems) {\n          const val = currentQueryItems[itemSplit[0]];\n          currentQueryItems[itemSplit[0]] = isArr(val) ? val.push(decodeURIComponent(itemSplit[1])) : [val, decodeURIComponent(itemSplit[1])];\n        } else currentQueryItems[itemSplit[0]] = decodeURIComponent(itemSplit[1]);\n    }\n  });\n  return currentQueryItems;\n};\n\nconst objToQuery = obj => {\n  let firstSet;\n  return reduceObj(obj, (key, value, urlStr) => {\n    if (!value) return urlStr;\n    const useVal = isStr(value) || isNum(value) || isBool(value) ? value : isColl(value) ? isArr(value) ? value.join(',') : JSON.stringify(value) : null;\n    if (!useVal) return urlStr;\n    urlStr = !firstSet ? `?${encodeURIComponent(key)}=${encodeURIComponent(useVal)}` : `${urlStr}&${encodeURIComponent(key)}=${encodeURIComponent(useVal)}`;\n    firstSet = true;\n    return urlStr;\n  }, '');\n};\n\nconst isValidUrl = string => {\n  var regexp = /(ftp|http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-/]))?/;\n  return regexp.test(string);\n};\n\nconst getURLParam = paramKey => {\n  var _doc$location, _queryToObj$paramKey, _queryToObj;\n  const [valid] = validate({\n    paramKey\n  }, {\n    paramKey: isStr\n  });\n  if (!valid) return null;\n  const doc = typeof document !== 'undefined' ? document : null;\n  const search = doc === null || doc === void 0 ? void 0 : (_doc$location = doc.location) === null || _doc$location === void 0 ? void 0 : _doc$location.search;\n  return isStr(search) ? (_queryToObj$paramKey = (_queryToObj = queryToObj(search)) === null || _queryToObj === void 0 ? void 0 : _queryToObj[paramKey]) !== null && _queryToObj$paramKey !== void 0 ? _queryToObj$paramKey : null : null;\n};\n\nexport { getURLParam as g, isValidUrl as i, objToQuery as o, queryToObj as q };\n//# sourceMappingURL=getURLParam-ba57cf43.js.map\n","import { useMemo, useRef } from 'react'\nimport { getState } from '../reducer/sockrState'\nimport { get, noPropArr, clearObj, eitherArr } from '@keg-hub/jsutils'\n\n/**\n * Hook to extract a single values from the sockr state object\n * Memoizes the extracted values and returns them as an object\n * Only updates the values when the store property matching a key statePaths has updated\n * This avoids re-renders when the state object has change, but a value has not\n * @function\n * @public\n * @export\n * @returns {Array} statePaths - Paths to values on the current sockr state\n *\n * @returns {Object} Memoize values from the state\n */\nexport const useSockrItems = (findPaths = noPropArr) => {\n  // Ensure we have an array to call reduce on\n  const statePaths = eitherArr(findPaths, [findPaths])\n\n  // Get the current state to allow pulling the values with statePaths\n  const state = getState()\n\n  // Memoize the current values from the state at statePaths\n  // If the state updates, but not the values from statePaths,\n  // then this hook with run, but the returned values will be the same\n  // Or it will get the updated values when the state has changes\n  // Either way, the values should always be the correct values in the state\n  const values = useMemo(() => {\n    return statePaths.reduce((found, valPath) => {\n      found[valPath] = get(state, valPath)\n\n      return found\n    }, {})\n  }, [ state, statePaths ])\n\n  // Init the sockrRef to store the initial value\n  const sockrRef = useRef(values)\n\n  // Memoize the values and sockrRef.current\n  // Loop each property in values and\n  // Update sockrRef.current to the current state value\n  // Then return sockrRef.current\n  // This way the values are only ever updated it it's they changed on that state changed\n  // If the state object changes, but not the values, then the original values are returned\n  return useMemo(() => {\n    // Clear out all keys from the current ref\n    // This also keeps the same identity of the ref object\n    // Which means we should check the children for updates, not the root object\n    clearObj(sockrRef.current)\n\n    // Loop the values and add the current values to the ref\n    // This puts back any values we removed in the clearObj method call\n    // If the value never changed, then the ref should have the same value again\n    // But it removes any properties that should not longer exist\n    Object.entries(values).map(\n      ([ key, value ]) => (sockrRef.current[key] = value)\n    )\n\n    return sockrRef.current\n  }, [ values, sockrRef && sockrRef.current ])\n}\n","/**\n * Parses an URI\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\n\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\nvar parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\n\nmodule.exports = function parseuri(str) {\n    var src = str,\n        b = str.indexOf('['),\n        e = str.indexOf(']');\n\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n\n    var m = re.exec(str || ''),\n        uri = {},\n        i = 14;\n\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n\n    return uri;\n};\n\nfunction pathNames(obj, path) {\n    var regx = /\\/{2,9}/g,\n        names = path.replace(regx, \"/\").split(\"/\");\n\n    if (path.substr(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.substr(path.length - 1, 1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n\n    return names;\n}\n\nfunction queryKey(uri, query) {\n    var data = {};\n\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n\n    return data;\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => enableOverride === null ? createDebug.enabled(namespace) : enableOverride,\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.url = void 0;\nconst parseuri = require(\"parseuri\");\nconst debug = require(\"debug\")(\"socket.io-client:url\");\n/**\n * URL parser.\n *\n * @param uri - url\n * @param path - the request path of the connection\n * @param loc - An object meant to mimic window.location.\n *        Defaults to window.location.\n * @public\n */\nfunction url(uri, path = \"\", loc) {\n    let obj = uri;\n    // default to window.location\n    loc = loc || (typeof location !== \"undefined\" && location);\n    if (null == uri)\n        uri = loc.protocol + \"//\" + loc.host;\n    // relative path support\n    if (typeof uri === \"string\") {\n        if (\"/\" === uri.charAt(0)) {\n            if (\"/\" === uri.charAt(1)) {\n                uri = loc.protocol + uri;\n            }\n            else {\n                uri = loc.host + uri;\n            }\n        }\n        if (!/^(https?|wss?):\\/\\//.test(uri)) {\n            debug(\"protocol-less url %s\", uri);\n            if (\"undefined\" !== typeof loc) {\n                uri = loc.protocol + \"//\" + uri;\n            }\n            else {\n                uri = \"https://\" + uri;\n            }\n        }\n        // parse\n        debug(\"parse %s\", uri);\n        obj = parseuri(uri);\n    }\n    // make sure we treat `localhost:80` and `localhost` equally\n    if (!obj.port) {\n        if (/^(http|ws)$/.test(obj.protocol)) {\n            obj.port = \"80\";\n        }\n        else if (/^(http|ws)s$/.test(obj.protocol)) {\n            obj.port = \"443\";\n        }\n    }\n    obj.path = obj.path || \"/\";\n    const ipv6 = obj.host.indexOf(\":\") !== -1;\n    const host = ipv6 ? \"[\" + obj.host + \"]\" : obj.host;\n    // define unique id\n    obj.id = obj.protocol + \"://\" + host + \":\" + obj.port + path;\n    // define href\n    obj.href =\n        obj.protocol +\n            \"://\" +\n            host +\n            (loc && loc.port === obj.port ? \"\" : \":\" + obj.port);\n    return obj;\n}\nexports.url = url;\n","\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n    'withCredentials' in new XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n","module.exports = (() => {\n  if (typeof self !== \"undefined\") {\n    return self;\n  } else if (typeof window !== \"undefined\") {\n    return window;\n  } else {\n    return Function(\"return this\")();\n  }\n})();\n","// browser shim for xmlhttprequest module\n\nconst hasCORS = require(\"has-cors\");\nconst globalThis = require(\"./globalThis\");\n\nmodule.exports = function(opts) {\n  const xdomain = opts.xdomain;\n\n  // scheme must be same when usign XDomainRequest\n  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n  const xscheme = opts.xscheme;\n\n  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n  // https://github.com/Automattic/engine.io-client/pull/217\n  const enablesXDR = opts.enablesXDR;\n\n  // XMLHttpRequest can be disabled on IE\n  try {\n    if (\"undefined\" !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n      return new XMLHttpRequest();\n    }\n  } catch (e) {}\n\n  // Use XDomainRequest for IE8 if enablesXDR is true\n  // because loading bar keeps flashing when using jsonp-polling\n  // https://github.com/yujiosaka/socke.io-ie8-loading-example\n  try {\n    if (\"undefined\" !== typeof XDomainRequest && !xscheme && enablesXDR) {\n      return new XDomainRequest();\n    }\n  } catch (e) {}\n\n  if (!xdomain) {\n    try {\n      return new globalThis[[\"Active\"].concat(\"Object\").join(\"X\")](\n        \"Microsoft.XMLHTTP\"\n      );\n    } catch (e) {}\n  }\n};\n","const PACKET_TYPES = Object.create(null); // no Map = no polyfill\nPACKET_TYPES[\"open\"] = \"0\";\nPACKET_TYPES[\"close\"] = \"1\";\nPACKET_TYPES[\"ping\"] = \"2\";\nPACKET_TYPES[\"pong\"] = \"3\";\nPACKET_TYPES[\"message\"] = \"4\";\nPACKET_TYPES[\"upgrade\"] = \"5\";\nPACKET_TYPES[\"noop\"] = \"6\";\n\nconst PACKET_TYPES_REVERSE = Object.create(null);\nObject.keys(PACKET_TYPES).forEach(key => {\n  PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;\n});\n\nconst ERROR_PACKET = { type: \"error\", data: \"parser error\" };\n\nmodule.exports = {\n  PACKET_TYPES,\n  PACKET_TYPES_REVERSE,\n  ERROR_PACKET\n};\n","const { PACKET_TYPES } = require(\"./commons\");\n\nconst withNativeBlob =\n  typeof Blob === \"function\" ||\n  (typeof Blob !== \"undefined\" &&\n    Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n\n// ArrayBuffer.isView method is not defined in IE10\nconst isView = obj => {\n  return typeof ArrayBuffer.isView === \"function\"\n    ? ArrayBuffer.isView(obj)\n    : obj && obj.buffer instanceof ArrayBuffer;\n};\n\nconst encodePacket = ({ type, data }, supportsBinary, callback) => {\n  if (withNativeBlob && data instanceof Blob) {\n    if (supportsBinary) {\n      return callback(data);\n    } else {\n      return encodeBlobAsBase64(data, callback);\n    }\n  } else if (\n    withNativeArrayBuffer &&\n    (data instanceof ArrayBuffer || isView(data))\n  ) {\n    if (supportsBinary) {\n      return callback(data instanceof ArrayBuffer ? data : data.buffer);\n    } else {\n      return encodeBlobAsBase64(new Blob([data]), callback);\n    }\n  }\n  // plain string\n  return callback(PACKET_TYPES[type] + (data || \"\"));\n};\n\nconst encodeBlobAsBase64 = (data, callback) => {\n  const fileReader = new FileReader();\n  fileReader.onload = function() {\n    const content = fileReader.result.split(\",\")[1];\n    callback(\"b\" + content);\n  };\n  return fileReader.readAsDataURL(data);\n};\n\nmodule.exports = encodePacket;\n","/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(chars){\n  \"use strict\";\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = chars.indexOf(base64[i]);\n      encoded2 = chars.indexOf(base64[i+1]);\n      encoded3 = chars.indexOf(base64[i+2]);\n      encoded4 = chars.indexOf(base64[i+3]);\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})(\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\");\n","const { PACKET_TYPES_REVERSE, ERROR_PACKET } = require(\"./commons\");\n\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n\nlet base64decoder;\nif (withNativeArrayBuffer) {\n  base64decoder = require(\"base64-arraybuffer\");\n}\n\nconst decodePacket = (encodedPacket, binaryType) => {\n  if (typeof encodedPacket !== \"string\") {\n    return {\n      type: \"message\",\n      data: mapBinary(encodedPacket, binaryType)\n    };\n  }\n  const type = encodedPacket.charAt(0);\n  if (type === \"b\") {\n    return {\n      type: \"message\",\n      data: decodeBase64Packet(encodedPacket.substring(1), binaryType)\n    };\n  }\n  const packetType = PACKET_TYPES_REVERSE[type];\n  if (!packetType) {\n    return ERROR_PACKET;\n  }\n  return encodedPacket.length > 1\n    ? {\n        type: PACKET_TYPES_REVERSE[type],\n        data: encodedPacket.substring(1)\n      }\n    : {\n        type: PACKET_TYPES_REVERSE[type]\n      };\n};\n\nconst decodeBase64Packet = (data, binaryType) => {\n  if (base64decoder) {\n    const decoded = base64decoder.decode(data);\n    return mapBinary(decoded, binaryType);\n  } else {\n    return { base64: true, data }; // fallback for old browsers\n  }\n};\n\nconst mapBinary = (data, binaryType) => {\n  switch (binaryType) {\n    case \"blob\":\n      return data instanceof ArrayBuffer ? new Blob([data]) : data;\n    case \"arraybuffer\":\n    default:\n      return data; // assuming the data is already an ArrayBuffer\n  }\n};\n\nmodule.exports = decodePacket;\n","const encodePacket = require(\"./encodePacket\");\nconst decodePacket = require(\"./decodePacket\");\n\nconst SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\n\nconst encodePayload = (packets, callback) => {\n  // some packets may be added to the array while encoding, so the initial length must be saved\n  const length = packets.length;\n  const encodedPackets = new Array(length);\n  let count = 0;\n\n  packets.forEach((packet, i) => {\n    // force base64 encoding for binary packets\n    encodePacket(packet, false, encodedPacket => {\n      encodedPackets[i] = encodedPacket;\n      if (++count === length) {\n        callback(encodedPackets.join(SEPARATOR));\n      }\n    });\n  });\n};\n\nconst decodePayload = (encodedPayload, binaryType) => {\n  const encodedPackets = encodedPayload.split(SEPARATOR);\n  const packets = [];\n  for (let i = 0; i < encodedPackets.length; i++) {\n    const decodedPacket = decodePacket(encodedPackets[i], binaryType);\n    packets.push(decodedPacket);\n    if (decodedPacket.type === \"error\") {\n      break;\n    }\n  }\n  return packets;\n};\n\nmodule.exports = {\n  protocol: 4,\n  encodePacket,\n  encodePayload,\n  decodePacket,\n  decodePayload\n};\n","\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n\r\n  // Remove event specific arrays for event types that no\r\n  // one is subscribed for to avoid memory leak.\r\n  if (callbacks.length === 0) {\r\n    delete this._callbacks['$' + event];\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  var args = new Array(arguments.length - 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  for (var i = 1; i < arguments.length; i++) {\r\n    args[i - 1] = arguments[i];\r\n  }\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","const parser = require(\"engine.io-parser\");\nconst Emitter = require(\"component-emitter\");\n\nclass Transport extends Emitter {\n  /**\n   * Transport abstract constructor.\n   *\n   * @param {Object} options.\n   * @api private\n   */\n  constructor(opts) {\n    super();\n\n    this.opts = opts;\n    this.query = opts.query;\n    this.readyState = \"\";\n    this.socket = opts.socket;\n  }\n\n  /**\n   * Emits an error.\n   *\n   * @param {String} str\n   * @return {Transport} for chaining\n   * @api public\n   */\n  onError(msg, desc) {\n    const err = new Error(msg);\n    err.type = \"TransportError\";\n    err.description = desc;\n    this.emit(\"error\", err);\n    return this;\n  }\n\n  /**\n   * Opens the transport.\n   *\n   * @api public\n   */\n  open() {\n    if (\"closed\" === this.readyState || \"\" === this.readyState) {\n      this.readyState = \"opening\";\n      this.doOpen();\n    }\n\n    return this;\n  }\n\n  /**\n   * Closes the transport.\n   *\n   * @api private\n   */\n  close() {\n    if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n      this.doClose();\n      this.onClose();\n    }\n\n    return this;\n  }\n\n  /**\n   * Sends multiple packets.\n   *\n   * @param {Array} packets\n   * @api private\n   */\n  send(packets) {\n    if (\"open\" === this.readyState) {\n      this.write(packets);\n    } else {\n      throw new Error(\"Transport not open\");\n    }\n  }\n\n  /**\n   * Called upon open\n   *\n   * @api private\n   */\n  onOpen() {\n    this.readyState = \"open\";\n    this.writable = true;\n    this.emit(\"open\");\n  }\n\n  /**\n   * Called with data.\n   *\n   * @param {String} data\n   * @api private\n   */\n  onData(data) {\n    const packet = parser.decodePacket(data, this.socket.binaryType);\n    this.onPacket(packet);\n  }\n\n  /**\n   * Called with a decoded packet.\n   */\n  onPacket(packet) {\n    this.emit(\"packet\", packet);\n  }\n\n  /**\n   * Called upon close.\n   *\n   * @api private\n   */\n  onClose() {\n    this.readyState = \"closed\";\n    this.emit(\"close\");\n  }\n}\n\nmodule.exports = Transport;\n","/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\n\nexports.encode = function (obj) {\n  var str = '';\n\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      if (str.length) str += '&';\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n    }\n  }\n\n  return str;\n};\n\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\n\nexports.decode = function(qs){\n  var qry = {};\n  var pairs = qs.split('&');\n  for (var i = 0, l = pairs.length; i < l; i++) {\n    var pair = pairs[i].split('=');\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n  }\n  return qry;\n};\n","'use strict';\n\nvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')\n  , length = 64\n  , map = {}\n  , seed = 0\n  , i = 0\n  , prev;\n\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nfunction encode(num) {\n  var encoded = '';\n\n  do {\n    encoded = alphabet[num % length] + encoded;\n    num = Math.floor(num / length);\n  } while (num > 0);\n\n  return encoded;\n}\n\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nfunction decode(str) {\n  var decoded = 0;\n\n  for (i = 0; i < str.length; i++) {\n    decoded = decoded * length + map[str.charAt(i)];\n  }\n\n  return decoded;\n}\n\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nfunction yeast() {\n  var now = encode(+new Date());\n\n  if (now !== prev) return seed = 0, prev = now;\n  return now +'.'+ encode(seed++);\n}\n\n//\n// Map each character to its index.\n//\nfor (; i < length; i++) map[alphabet[i]] = i;\n\n//\n// Expose the `yeast`, `encode` and `decode` functions.\n//\nyeast.encode = encode;\nyeast.decode = decode;\nmodule.exports = yeast;\n","const Transport = require(\"../transport\");\nconst parseqs = require(\"parseqs\");\nconst parser = require(\"engine.io-parser\");\nconst yeast = require(\"yeast\");\n\nconst debug = require(\"debug\")(\"engine.io-client:polling\");\n\nclass Polling extends Transport {\n  /**\n   * Transport name.\n   */\n  get name() {\n    return \"polling\";\n  }\n\n  /**\n   * Opens the socket (triggers polling). We write a PING message to determine\n   * when the transport is open.\n   *\n   * @api private\n   */\n  doOpen() {\n    this.poll();\n  }\n\n  /**\n   * Pauses polling.\n   *\n   * @param {Function} callback upon buffers are flushed and transport is paused\n   * @api private\n   */\n  pause(onPause) {\n    const self = this;\n\n    this.readyState = \"pausing\";\n\n    function pause() {\n      debug(\"paused\");\n      self.readyState = \"paused\";\n      onPause();\n    }\n\n    if (this.polling || !this.writable) {\n      let total = 0;\n\n      if (this.polling) {\n        debug(\"we are currently polling - waiting to pause\");\n        total++;\n        this.once(\"pollComplete\", function() {\n          debug(\"pre-pause polling complete\");\n          --total || pause();\n        });\n      }\n\n      if (!this.writable) {\n        debug(\"we are currently writing - waiting to pause\");\n        total++;\n        this.once(\"drain\", function() {\n          debug(\"pre-pause writing complete\");\n          --total || pause();\n        });\n      }\n    } else {\n      pause();\n    }\n  }\n\n  /**\n   * Starts polling cycle.\n   *\n   * @api public\n   */\n  poll() {\n    debug(\"polling\");\n    this.polling = true;\n    this.doPoll();\n    this.emit(\"poll\");\n  }\n\n  /**\n   * Overloads onData to detect payloads.\n   *\n   * @api private\n   */\n  onData(data) {\n    const self = this;\n    debug(\"polling got data %s\", data);\n    const callback = function(packet, index, total) {\n      // if its the first message we consider the transport open\n      if (\"opening\" === self.readyState && packet.type === \"open\") {\n        self.onOpen();\n      }\n\n      // if its a close packet, we close the ongoing requests\n      if (\"close\" === packet.type) {\n        self.onClose();\n        return false;\n      }\n\n      // otherwise bypass onData and handle the message\n      self.onPacket(packet);\n    };\n\n    // decode payload\n    parser.decodePayload(data, this.socket.binaryType).forEach(callback);\n\n    // if an event did not trigger closing\n    if (\"closed\" !== this.readyState) {\n      // if we got data we're not polling\n      this.polling = false;\n      this.emit(\"pollComplete\");\n\n      if (\"open\" === this.readyState) {\n        this.poll();\n      } else {\n        debug('ignoring poll - transport state \"%s\"', this.readyState);\n      }\n    }\n  }\n\n  /**\n   * For polling, send a close packet.\n   *\n   * @api private\n   */\n  doClose() {\n    const self = this;\n\n    function close() {\n      debug(\"writing close packet\");\n      self.write([{ type: \"close\" }]);\n    }\n\n    if (\"open\" === this.readyState) {\n      debug(\"transport open - closing\");\n      close();\n    } else {\n      // in case we're trying to close while\n      // handshaking is in progress (GH-164)\n      debug(\"transport not open - deferring close\");\n      this.once(\"open\", close);\n    }\n  }\n\n  /**\n   * Writes a packets payload.\n   *\n   * @param {Array} data packets\n   * @param {Function} drain callback\n   * @api private\n   */\n  write(packets) {\n    this.writable = false;\n\n    parser.encodePayload(packets, data => {\n      this.doWrite(data, () => {\n        this.writable = true;\n        this.emit(\"drain\");\n      });\n    });\n  }\n\n  /**\n   * Generates uri for connection.\n   *\n   * @api private\n   */\n  uri() {\n    let query = this.query || {};\n    const schema = this.opts.secure ? \"https\" : \"http\";\n    let port = \"\";\n\n    // cache busting is forced\n    if (false !== this.opts.timestampRequests) {\n      query[this.opts.timestampParam] = yeast();\n    }\n\n    if (!this.supportsBinary && !query.sid) {\n      query.b64 = 1;\n    }\n\n    query = parseqs.encode(query);\n\n    // avoid port if default for schema\n    if (\n      this.opts.port &&\n      ((\"https\" === schema && Number(this.opts.port) !== 443) ||\n        (\"http\" === schema && Number(this.opts.port) !== 80))\n    ) {\n      port = \":\" + this.opts.port;\n    }\n\n    // prepend ? to query\n    if (query.length) {\n      query = \"?\" + query;\n    }\n\n    const ipv6 = this.opts.hostname.indexOf(\":\") !== -1;\n    return (\n      schema +\n      \"://\" +\n      (ipv6 ? \"[\" + this.opts.hostname + \"]\" : this.opts.hostname) +\n      port +\n      this.opts.path +\n      query\n    );\n  }\n}\n\nmodule.exports = Polling;\n","module.exports.pick = (obj, ...attr) => {\n  return attr.reduce((acc, k) => {\n    if (obj.hasOwnProperty(k)) {\n      acc[k] = obj[k];\n    }\n    return acc;\n  }, {});\n};\n","/* global attachEvent */\n\nconst XMLHttpRequest = require(\"xmlhttprequest-ssl\");\nconst Polling = require(\"./polling\");\nconst Emitter = require(\"component-emitter\");\nconst { pick } = require(\"../util\");\nconst globalThis = require(\"../globalThis\");\n\nconst debug = require(\"debug\")(\"engine.io-client:polling-xhr\");\n\n/**\n * Empty function\n */\n\nfunction empty() {}\n\nconst hasXHR2 = (function() {\n  const xhr = new XMLHttpRequest({ xdomain: false });\n  return null != xhr.responseType;\n})();\n\nclass XHR extends Polling {\n  /**\n   * XHR Polling constructor.\n   *\n   * @param {Object} opts\n   * @api public\n   */\n  constructor(opts) {\n    super(opts);\n\n    if (typeof location !== \"undefined\") {\n      const isSSL = \"https:\" === location.protocol;\n      let port = location.port;\n\n      // some user agents have empty `location.port`\n      if (!port) {\n        port = isSSL ? 443 : 80;\n      }\n\n      this.xd =\n        (typeof location !== \"undefined\" &&\n          opts.hostname !== location.hostname) ||\n        port !== opts.port;\n      this.xs = opts.secure !== isSSL;\n    }\n    /**\n     * XHR supports binary\n     */\n    const forceBase64 = opts && opts.forceBase64;\n    this.supportsBinary = hasXHR2 && !forceBase64;\n  }\n\n  /**\n   * Creates a request.\n   *\n   * @param {String} method\n   * @api private\n   */\n  request(opts = {}) {\n    Object.assign(opts, { xd: this.xd, xs: this.xs }, this.opts);\n    return new Request(this.uri(), opts);\n  }\n\n  /**\n   * Sends data.\n   *\n   * @param {String} data to send.\n   * @param {Function} called upon flush.\n   * @api private\n   */\n  doWrite(data, fn) {\n    const req = this.request({\n      method: \"POST\",\n      data: data\n    });\n    const self = this;\n    req.on(\"success\", fn);\n    req.on(\"error\", function(err) {\n      self.onError(\"xhr post error\", err);\n    });\n  }\n\n  /**\n   * Starts a poll cycle.\n   *\n   * @api private\n   */\n  doPoll() {\n    debug(\"xhr poll\");\n    const req = this.request();\n    const self = this;\n    req.on(\"data\", function(data) {\n      self.onData(data);\n    });\n    req.on(\"error\", function(err) {\n      self.onError(\"xhr poll error\", err);\n    });\n    this.pollXhr = req;\n  }\n}\n\nclass Request extends Emitter {\n  /**\n   * Request constructor\n   *\n   * @param {Object} options\n   * @api public\n   */\n  constructor(uri, opts) {\n    super();\n    this.opts = opts;\n\n    this.method = opts.method || \"GET\";\n    this.uri = uri;\n    this.async = false !== opts.async;\n    this.data = undefined !== opts.data ? opts.data : null;\n\n    this.create();\n  }\n\n  /**\n   * Creates the XHR object and sends the request.\n   *\n   * @api private\n   */\n  create() {\n    const opts = pick(\n      this.opts,\n      \"agent\",\n      \"enablesXDR\",\n      \"pfx\",\n      \"key\",\n      \"passphrase\",\n      \"cert\",\n      \"ca\",\n      \"ciphers\",\n      \"rejectUnauthorized\"\n    );\n    opts.xdomain = !!this.opts.xd;\n    opts.xscheme = !!this.opts.xs;\n\n    const xhr = (this.xhr = new XMLHttpRequest(opts));\n    const self = this;\n\n    try {\n      debug(\"xhr open %s: %s\", this.method, this.uri);\n      xhr.open(this.method, this.uri, this.async);\n      try {\n        if (this.opts.extraHeaders) {\n          xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n          for (let i in this.opts.extraHeaders) {\n            if (this.opts.extraHeaders.hasOwnProperty(i)) {\n              xhr.setRequestHeader(i, this.opts.extraHeaders[i]);\n            }\n          }\n        }\n      } catch (e) {}\n\n      if (\"POST\" === this.method) {\n        try {\n          xhr.setRequestHeader(\"Content-type\", \"text/plain;charset=UTF-8\");\n        } catch (e) {}\n      }\n\n      try {\n        xhr.setRequestHeader(\"Accept\", \"*/*\");\n      } catch (e) {}\n\n      // ie6 check\n      if (\"withCredentials\" in xhr) {\n        xhr.withCredentials = this.opts.withCredentials;\n      }\n\n      if (this.opts.requestTimeout) {\n        xhr.timeout = this.opts.requestTimeout;\n      }\n\n      if (this.hasXDR()) {\n        xhr.onload = function() {\n          self.onLoad();\n        };\n        xhr.onerror = function() {\n          self.onError(xhr.responseText);\n        };\n      } else {\n        xhr.onreadystatechange = function() {\n          if (4 !== xhr.readyState) return;\n          if (200 === xhr.status || 1223 === xhr.status) {\n            self.onLoad();\n          } else {\n            // make sure the `error` event handler that's user-set\n            // does not throw in the same tick and gets caught here\n            setTimeout(function() {\n              self.onError(typeof xhr.status === \"number\" ? xhr.status : 0);\n            }, 0);\n          }\n        };\n      }\n\n      debug(\"xhr data %s\", this.data);\n      xhr.send(this.data);\n    } catch (e) {\n      // Need to defer since .create() is called directly from the constructor\n      // and thus the 'error' event can only be only bound *after* this exception\n      // occurs.  Therefore, also, we cannot throw here at all.\n      setTimeout(function() {\n        self.onError(e);\n      }, 0);\n      return;\n    }\n\n    if (typeof document !== \"undefined\") {\n      this.index = Request.requestsCount++;\n      Request.requests[this.index] = this;\n    }\n  }\n\n  /**\n   * Called upon successful response.\n   *\n   * @api private\n   */\n  onSuccess() {\n    this.emit(\"success\");\n    this.cleanup();\n  }\n\n  /**\n   * Called if we have data.\n   *\n   * @api private\n   */\n  onData(data) {\n    this.emit(\"data\", data);\n    this.onSuccess();\n  }\n\n  /**\n   * Called upon error.\n   *\n   * @api private\n   */\n  onError(err) {\n    this.emit(\"error\", err);\n    this.cleanup(true);\n  }\n\n  /**\n   * Cleans up house.\n   *\n   * @api private\n   */\n  cleanup(fromError) {\n    if (\"undefined\" === typeof this.xhr || null === this.xhr) {\n      return;\n    }\n    // xmlhttprequest\n    if (this.hasXDR()) {\n      this.xhr.onload = this.xhr.onerror = empty;\n    } else {\n      this.xhr.onreadystatechange = empty;\n    }\n\n    if (fromError) {\n      try {\n        this.xhr.abort();\n      } catch (e) {}\n    }\n\n    if (typeof document !== \"undefined\") {\n      delete Request.requests[this.index];\n    }\n\n    this.xhr = null;\n  }\n\n  /**\n   * Called upon load.\n   *\n   * @api private\n   */\n  onLoad() {\n    const data = this.xhr.responseText;\n    if (data !== null) {\n      this.onData(data);\n    }\n  }\n\n  /**\n   * Check if it has XDomainRequest.\n   *\n   * @api private\n   */\n  hasXDR() {\n    return typeof XDomainRequest !== \"undefined\" && !this.xs && this.enablesXDR;\n  }\n\n  /**\n   * Aborts the request.\n   *\n   * @api public\n   */\n  abort() {\n    this.cleanup();\n  }\n}\n\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\n\nRequest.requestsCount = 0;\nRequest.requests = {};\n\nif (typeof document !== \"undefined\") {\n  if (typeof attachEvent === \"function\") {\n    attachEvent(\"onunload\", unloadHandler);\n  } else if (typeof addEventListener === \"function\") {\n    const terminationEvent = \"onpagehide\" in globalThis ? \"pagehide\" : \"unload\";\n    addEventListener(terminationEvent, unloadHandler, false);\n  }\n}\n\nfunction unloadHandler() {\n  for (let i in Request.requests) {\n    if (Request.requests.hasOwnProperty(i)) {\n      Request.requests[i].abort();\n    }\n  }\n}\n\nmodule.exports = XHR;\nmodule.exports.Request = Request;\n","const Polling = require(\"./polling\");\nconst globalThis = require(\"../globalThis\");\n\nconst rNewline = /\\n/g;\nconst rEscapedNewline = /\\\\n/g;\n\n/**\n * Global JSONP callbacks.\n */\n\nlet callbacks;\n\n/**\n * Noop.\n */\n\nfunction empty() {}\n\nclass JSONPPolling extends Polling {\n  /**\n   * JSONP Polling constructor.\n   *\n   * @param {Object} opts.\n   * @api public\n   */\n  constructor(opts) {\n    super(opts);\n\n    this.query = this.query || {};\n\n    // define global callbacks array if not present\n    // we do this here (lazily) to avoid unneeded global pollution\n    if (!callbacks) {\n      // we need to consider multiple engines in the same page\n      callbacks = globalThis.___eio = globalThis.___eio || [];\n    }\n\n    // callback identifier\n    this.index = callbacks.length;\n\n    // add callback to jsonp global\n    const self = this;\n    callbacks.push(function(msg) {\n      self.onData(msg);\n    });\n\n    // append to query string\n    this.query.j = this.index;\n\n    // prevent spurious errors from being emitted when the window is unloaded\n    if (typeof addEventListener === \"function\") {\n      addEventListener(\n        \"beforeunload\",\n        function() {\n          if (self.script) self.script.onerror = empty;\n        },\n        false\n      );\n    }\n  }\n\n  /**\n   * JSONP only supports binary as base64 encoded strings\n   */\n  get supportsBinary() {\n    return false;\n  }\n\n  /**\n   * Closes the socket.\n   *\n   * @api private\n   */\n  doClose() {\n    if (this.script) {\n      this.script.parentNode.removeChild(this.script);\n      this.script = null;\n    }\n\n    if (this.form) {\n      this.form.parentNode.removeChild(this.form);\n      this.form = null;\n      this.iframe = null;\n    }\n\n    super.doClose();\n  }\n\n  /**\n   * Starts a poll cycle.\n   *\n   * @api private\n   */\n  doPoll() {\n    const self = this;\n    const script = document.createElement(\"script\");\n\n    if (this.script) {\n      this.script.parentNode.removeChild(this.script);\n      this.script = null;\n    }\n\n    script.async = true;\n    script.src = this.uri();\n    script.onerror = function(e) {\n      self.onError(\"jsonp poll error\", e);\n    };\n\n    const insertAt = document.getElementsByTagName(\"script\")[0];\n    if (insertAt) {\n      insertAt.parentNode.insertBefore(script, insertAt);\n    } else {\n      (document.head || document.body).appendChild(script);\n    }\n    this.script = script;\n\n    const isUAgecko =\n      \"undefined\" !== typeof navigator && /gecko/i.test(navigator.userAgent);\n\n    if (isUAgecko) {\n      setTimeout(function() {\n        const iframe = document.createElement(\"iframe\");\n        document.body.appendChild(iframe);\n        document.body.removeChild(iframe);\n      }, 100);\n    }\n  }\n\n  /**\n   * Writes with a hidden iframe.\n   *\n   * @param {String} data to send\n   * @param {Function} called upon flush.\n   * @api private\n   */\n  doWrite(data, fn) {\n    const self = this;\n    let iframe;\n\n    if (!this.form) {\n      const form = document.createElement(\"form\");\n      const area = document.createElement(\"textarea\");\n      const id = (this.iframeId = \"eio_iframe_\" + this.index);\n\n      form.className = \"socketio\";\n      form.style.position = \"absolute\";\n      form.style.top = \"-1000px\";\n      form.style.left = \"-1000px\";\n      form.target = id;\n      form.method = \"POST\";\n      form.setAttribute(\"accept-charset\", \"utf-8\");\n      area.name = \"d\";\n      form.appendChild(area);\n      document.body.appendChild(form);\n\n      this.form = form;\n      this.area = area;\n    }\n\n    this.form.action = this.uri();\n\n    function complete() {\n      initIframe();\n      fn();\n    }\n\n    function initIframe() {\n      if (self.iframe) {\n        try {\n          self.form.removeChild(self.iframe);\n        } catch (e) {\n          self.onError(\"jsonp polling iframe removal error\", e);\n        }\n      }\n\n      try {\n        // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n        const html = '<iframe src=\"javascript:0\" name=\"' + self.iframeId + '\">';\n        iframe = document.createElement(html);\n      } catch (e) {\n        iframe = document.createElement(\"iframe\");\n        iframe.name = self.iframeId;\n        iframe.src = \"javascript:0\";\n      }\n\n      iframe.id = self.iframeId;\n\n      self.form.appendChild(iframe);\n      self.iframe = iframe;\n    }\n\n    initIframe();\n\n    // escape \\n to prevent it from being converted into \\r\\n by some UAs\n    // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n    data = data.replace(rEscapedNewline, \"\\\\\\n\");\n    this.area.value = data.replace(rNewline, \"\\\\n\");\n\n    try {\n      this.form.submit();\n    } catch (e) {}\n\n    if (this.iframe.attachEvent) {\n      this.iframe.onreadystatechange = function() {\n        if (self.iframe.readyState === \"complete\") {\n          complete();\n        }\n      };\n    } else {\n      this.iframe.onload = complete;\n    }\n  }\n}\n\nmodule.exports = JSONPPolling;\n","const globalThis = require(\"../globalThis\");\n\nmodule.exports = {\n  WebSocket: globalThis.WebSocket || globalThis.MozWebSocket,\n  usingBrowserWebSocket: true,\n  defaultBinaryType: \"arraybuffer\"\n};\n","const Transport = require(\"../transport\");\nconst parser = require(\"engine.io-parser\");\nconst parseqs = require(\"parseqs\");\nconst yeast = require(\"yeast\");\nconst { pick } = require(\"../util\");\nconst {\n  WebSocket,\n  usingBrowserWebSocket,\n  defaultBinaryType\n} = require(\"./websocket-constructor\");\n\nconst debug = require(\"debug\")(\"engine.io-client:websocket\");\n\n// detect ReactNative environment\nconst isReactNative =\n  typeof navigator !== \"undefined\" &&\n  typeof navigator.product === \"string\" &&\n  navigator.product.toLowerCase() === \"reactnative\";\n\nclass WS extends Transport {\n  /**\n   * WebSocket transport constructor.\n   *\n   * @api {Object} connection options\n   * @api public\n   */\n  constructor(opts) {\n    super(opts);\n\n    this.supportsBinary = !opts.forceBase64;\n  }\n\n  /**\n   * Transport name.\n   *\n   * @api public\n   */\n  get name() {\n    return \"websocket\";\n  }\n\n  /**\n   * Opens socket.\n   *\n   * @api private\n   */\n  doOpen() {\n    if (!this.check()) {\n      // let probe timeout\n      return;\n    }\n\n    const uri = this.uri();\n    const protocols = this.opts.protocols;\n\n    // React Native only supports the 'headers' option, and will print a warning if anything else is passed\n    const opts = isReactNative\n      ? {}\n      : pick(\n          this.opts,\n          \"agent\",\n          \"perMessageDeflate\",\n          \"pfx\",\n          \"key\",\n          \"passphrase\",\n          \"cert\",\n          \"ca\",\n          \"ciphers\",\n          \"rejectUnauthorized\",\n          \"localAddress\",\n          \"protocolVersion\",\n          \"origin\",\n          \"maxPayload\",\n          \"family\",\n          \"checkServerIdentity\"\n        );\n\n    if (this.opts.extraHeaders) {\n      opts.headers = this.opts.extraHeaders;\n    }\n\n    try {\n      this.ws =\n        usingBrowserWebSocket && !isReactNative\n          ? protocols\n            ? new WebSocket(uri, protocols)\n            : new WebSocket(uri)\n          : new WebSocket(uri, protocols, opts);\n    } catch (err) {\n      return this.emit(\"error\", err);\n    }\n\n    this.ws.binaryType = this.socket.binaryType || defaultBinaryType;\n\n    this.addEventListeners();\n  }\n\n  /**\n   * Adds event listeners to the socket\n   *\n   * @api private\n   */\n  addEventListeners() {\n    const self = this;\n\n    this.ws.onopen = function() {\n      self.onOpen();\n    };\n    this.ws.onclose = function() {\n      self.onClose();\n    };\n    this.ws.onmessage = function(ev) {\n      self.onData(ev.data);\n    };\n    this.ws.onerror = function(e) {\n      self.onError(\"websocket error\", e);\n    };\n  }\n\n  /**\n   * Writes data to socket.\n   *\n   * @param {Array} array of packets.\n   * @api private\n   */\n  write(packets) {\n    const self = this;\n    this.writable = false;\n\n    // encodePacket efficient as it uses WS framing\n    // no need for encodePayload\n    let total = packets.length;\n    let i = 0;\n    const l = total;\n    for (; i < l; i++) {\n      (function(packet) {\n        parser.encodePacket(packet, self.supportsBinary, function(data) {\n          // always create a new object (GH-437)\n          const opts = {};\n          if (!usingBrowserWebSocket) {\n            if (packet.options) {\n              opts.compress = packet.options.compress;\n            }\n\n            if (self.opts.perMessageDeflate) {\n              const len =\n                \"string\" === typeof data\n                  ? Buffer.byteLength(data)\n                  : data.length;\n              if (len < self.opts.perMessageDeflate.threshold) {\n                opts.compress = false;\n              }\n            }\n          }\n\n          // Sometimes the websocket has already been closed but the browser didn't\n          // have a chance of informing us about it yet, in that case send will\n          // throw an error\n          try {\n            if (usingBrowserWebSocket) {\n              // TypeError is thrown when passing the second argument on Safari\n              self.ws.send(data);\n            } else {\n              self.ws.send(data, opts);\n            }\n          } catch (e) {\n            debug(\"websocket closed before onclose event\");\n          }\n\n          --total || done();\n        });\n      })(packets[i]);\n    }\n\n    function done() {\n      self.emit(\"flush\");\n\n      // fake drain\n      // defer to next tick to allow Socket to clear writeBuffer\n      setTimeout(function() {\n        self.writable = true;\n        self.emit(\"drain\");\n      }, 0);\n    }\n  }\n\n  /**\n   * Called upon close\n   *\n   * @api private\n   */\n  onClose() {\n    Transport.prototype.onClose.call(this);\n  }\n\n  /**\n   * Closes socket.\n   *\n   * @api private\n   */\n  doClose() {\n    if (typeof this.ws !== \"undefined\") {\n      this.ws.close();\n    }\n  }\n\n  /**\n   * Generates uri for connection.\n   *\n   * @api private\n   */\n  uri() {\n    let query = this.query || {};\n    const schema = this.opts.secure ? \"wss\" : \"ws\";\n    let port = \"\";\n\n    // avoid port if default for schema\n    if (\n      this.opts.port &&\n      ((\"wss\" === schema && Number(this.opts.port) !== 443) ||\n        (\"ws\" === schema && Number(this.opts.port) !== 80))\n    ) {\n      port = \":\" + this.opts.port;\n    }\n\n    // append timestamp to URI\n    if (this.opts.timestampRequests) {\n      query[this.opts.timestampParam] = yeast();\n    }\n\n    // communicate binary support capabilities\n    if (!this.supportsBinary) {\n      query.b64 = 1;\n    }\n\n    query = parseqs.encode(query);\n\n    // prepend ? to query\n    if (query.length) {\n      query = \"?\" + query;\n    }\n\n    const ipv6 = this.opts.hostname.indexOf(\":\") !== -1;\n    return (\n      schema +\n      \"://\" +\n      (ipv6 ? \"[\" + this.opts.hostname + \"]\" : this.opts.hostname) +\n      port +\n      this.opts.path +\n      query\n    );\n  }\n\n  /**\n   * Feature detection for WebSocket.\n   *\n   * @return {Boolean} whether this transport is available.\n   * @api public\n   */\n  check() {\n    return (\n      !!WebSocket &&\n      !(\"__initialize\" in WebSocket && this.name === WS.prototype.name)\n    );\n  }\n}\n\nmodule.exports = WS;\n","const XMLHttpRequest = require(\"xmlhttprequest-ssl\");\nconst XHR = require(\"./polling-xhr\");\nconst JSONP = require(\"./polling-jsonp\");\nconst websocket = require(\"./websocket\");\n\nexports.polling = polling;\nexports.websocket = websocket;\n\n/**\n * Polling transport polymorphic constructor.\n * Decides on xhr vs jsonp based on feature detection.\n *\n * @api private\n */\n\nfunction polling(opts) {\n  let xhr;\n  let xd = false;\n  let xs = false;\n  const jsonp = false !== opts.jsonp;\n\n  if (typeof location !== \"undefined\") {\n    const isSSL = \"https:\" === location.protocol;\n    let port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    xd = opts.hostname !== location.hostname || port !== opts.port;\n    xs = opts.secure !== isSSL;\n  }\n\n  opts.xdomain = xd;\n  opts.xscheme = xs;\n  xhr = new XMLHttpRequest(opts);\n\n  if (\"open\" in xhr && !opts.forceJSONP) {\n    return new XHR(opts);\n  } else {\n    if (!jsonp) throw new Error(\"JSONP disabled\");\n    return new JSONP(opts);\n  }\n}\n","const transports = require(\"./transports/index\");\nconst Emitter = require(\"component-emitter\");\nconst debug = require(\"debug\")(\"engine.io-client:socket\");\nconst parser = require(\"engine.io-parser\");\nconst parseuri = require(\"parseuri\");\nconst parseqs = require(\"parseqs\");\n\nclass Socket extends Emitter {\n  /**\n   * Socket constructor.\n   *\n   * @param {String|Object} uri or options\n   * @param {Object} options\n   * @api public\n   */\n  constructor(uri, opts = {}) {\n    super();\n\n    if (uri && \"object\" === typeof uri) {\n      opts = uri;\n      uri = null;\n    }\n\n    if (uri) {\n      uri = parseuri(uri);\n      opts.hostname = uri.host;\n      opts.secure = uri.protocol === \"https\" || uri.protocol === \"wss\";\n      opts.port = uri.port;\n      if (uri.query) opts.query = uri.query;\n    } else if (opts.host) {\n      opts.hostname = parseuri(opts.host).host;\n    }\n\n    this.secure =\n      null != opts.secure\n        ? opts.secure\n        : typeof location !== \"undefined\" && \"https:\" === location.protocol;\n\n    if (opts.hostname && !opts.port) {\n      // if no port is specified manually, use the protocol default\n      opts.port = this.secure ? \"443\" : \"80\";\n    }\n\n    this.hostname =\n      opts.hostname ||\n      (typeof location !== \"undefined\" ? location.hostname : \"localhost\");\n    this.port =\n      opts.port ||\n      (typeof location !== \"undefined\" && location.port\n        ? location.port\n        : this.secure\n        ? 443\n        : 80);\n\n    this.transports = opts.transports || [\"polling\", \"websocket\"];\n    this.readyState = \"\";\n    this.writeBuffer = [];\n    this.prevBufferLen = 0;\n\n    this.opts = Object.assign(\n      {\n        path: \"/engine.io\",\n        agent: false,\n        withCredentials: false,\n        upgrade: true,\n        jsonp: true,\n        timestampParam: \"t\",\n        rememberUpgrade: false,\n        rejectUnauthorized: true,\n        perMessageDeflate: {\n          threshold: 1024\n        },\n        transportOptions: {}\n      },\n      opts\n    );\n\n    this.opts.path = this.opts.path.replace(/\\/$/, \"\") + \"/\";\n\n    if (typeof this.opts.query === \"string\") {\n      this.opts.query = parseqs.decode(this.opts.query);\n    }\n\n    // set on handshake\n    this.id = null;\n    this.upgrades = null;\n    this.pingInterval = null;\n    this.pingTimeout = null;\n\n    // set on heartbeat\n    this.pingTimeoutTimer = null;\n\n    this.open();\n  }\n\n  /**\n   * Creates transport of the given type.\n   *\n   * @param {String} transport name\n   * @return {Transport}\n   * @api private\n   */\n  createTransport(name) {\n    debug('creating transport \"%s\"', name);\n    const query = clone(this.opts.query);\n\n    // append engine.io protocol identifier\n    query.EIO = parser.protocol;\n\n    // transport name\n    query.transport = name;\n\n    // session id if we already have one\n    if (this.id) query.sid = this.id;\n\n    const opts = Object.assign(\n      {},\n      this.opts.transportOptions[name],\n      this.opts,\n      {\n        query,\n        socket: this,\n        hostname: this.hostname,\n        secure: this.secure,\n        port: this.port\n      }\n    );\n\n    debug(\"options: %j\", opts);\n\n    return new transports[name](opts);\n  }\n\n  /**\n   * Initializes transport to use and starts probe.\n   *\n   * @api private\n   */\n  open() {\n    let transport;\n    if (\n      this.opts.rememberUpgrade &&\n      Socket.priorWebsocketSuccess &&\n      this.transports.indexOf(\"websocket\") !== -1\n    ) {\n      transport = \"websocket\";\n    } else if (0 === this.transports.length) {\n      // Emit error on next tick so it can be listened to\n      const self = this;\n      setTimeout(function() {\n        self.emit(\"error\", \"No transports available\");\n      }, 0);\n      return;\n    } else {\n      transport = this.transports[0];\n    }\n    this.readyState = \"opening\";\n\n    // Retry with the next transport if the transport is disabled (jsonp: false)\n    try {\n      transport = this.createTransport(transport);\n    } catch (e) {\n      debug(\"error while creating transport: %s\", e);\n      this.transports.shift();\n      this.open();\n      return;\n    }\n\n    transport.open();\n    this.setTransport(transport);\n  }\n\n  /**\n   * Sets the current transport. Disables the existing one (if any).\n   *\n   * @api private\n   */\n  setTransport(transport) {\n    debug(\"setting transport %s\", transport.name);\n    const self = this;\n\n    if (this.transport) {\n      debug(\"clearing existing transport %s\", this.transport.name);\n      this.transport.removeAllListeners();\n    }\n\n    // set up transport\n    this.transport = transport;\n\n    // set up transport listeners\n    transport\n      .on(\"drain\", function() {\n        self.onDrain();\n      })\n      .on(\"packet\", function(packet) {\n        self.onPacket(packet);\n      })\n      .on(\"error\", function(e) {\n        self.onError(e);\n      })\n      .on(\"close\", function() {\n        self.onClose(\"transport close\");\n      });\n  }\n\n  /**\n   * Probes a transport.\n   *\n   * @param {String} transport name\n   * @api private\n   */\n  probe(name) {\n    debug('probing transport \"%s\"', name);\n    let transport = this.createTransport(name, { probe: 1 });\n    let failed = false;\n    const self = this;\n\n    Socket.priorWebsocketSuccess = false;\n\n    function onTransportOpen() {\n      if (self.onlyBinaryUpgrades) {\n        const upgradeLosesBinary =\n          !this.supportsBinary && self.transport.supportsBinary;\n        failed = failed || upgradeLosesBinary;\n      }\n      if (failed) return;\n\n      debug('probe transport \"%s\" opened', name);\n      transport.send([{ type: \"ping\", data: \"probe\" }]);\n      transport.once(\"packet\", function(msg) {\n        if (failed) return;\n        if (\"pong\" === msg.type && \"probe\" === msg.data) {\n          debug('probe transport \"%s\" pong', name);\n          self.upgrading = true;\n          self.emit(\"upgrading\", transport);\n          if (!transport) return;\n          Socket.priorWebsocketSuccess = \"websocket\" === transport.name;\n\n          debug('pausing current transport \"%s\"', self.transport.name);\n          self.transport.pause(function() {\n            if (failed) return;\n            if (\"closed\" === self.readyState) return;\n            debug(\"changing transport and sending upgrade packet\");\n\n            cleanup();\n\n            self.setTransport(transport);\n            transport.send([{ type: \"upgrade\" }]);\n            self.emit(\"upgrade\", transport);\n            transport = null;\n            self.upgrading = false;\n            self.flush();\n          });\n        } else {\n          debug('probe transport \"%s\" failed', name);\n          const err = new Error(\"probe error\");\n          err.transport = transport.name;\n          self.emit(\"upgradeError\", err);\n        }\n      });\n    }\n\n    function freezeTransport() {\n      if (failed) return;\n\n      // Any callback called by transport should be ignored since now\n      failed = true;\n\n      cleanup();\n\n      transport.close();\n      transport = null;\n    }\n\n    // Handle any error that happens while probing\n    function onerror(err) {\n      const error = new Error(\"probe error: \" + err);\n      error.transport = transport.name;\n\n      freezeTransport();\n\n      debug('probe transport \"%s\" failed because of error: %s', name, err);\n\n      self.emit(\"upgradeError\", error);\n    }\n\n    function onTransportClose() {\n      onerror(\"transport closed\");\n    }\n\n    // When the socket is closed while we're probing\n    function onclose() {\n      onerror(\"socket closed\");\n    }\n\n    // When the socket is upgraded while we're probing\n    function onupgrade(to) {\n      if (transport && to.name !== transport.name) {\n        debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n        freezeTransport();\n      }\n    }\n\n    // Remove all listeners on the transport and on self\n    function cleanup() {\n      transport.removeListener(\"open\", onTransportOpen);\n      transport.removeListener(\"error\", onerror);\n      transport.removeListener(\"close\", onTransportClose);\n      self.removeListener(\"close\", onclose);\n      self.removeListener(\"upgrading\", onupgrade);\n    }\n\n    transport.once(\"open\", onTransportOpen);\n    transport.once(\"error\", onerror);\n    transport.once(\"close\", onTransportClose);\n\n    this.once(\"close\", onclose);\n    this.once(\"upgrading\", onupgrade);\n\n    transport.open();\n  }\n\n  /**\n   * Called when connection is deemed open.\n   *\n   * @api public\n   */\n  onOpen() {\n    debug(\"socket open\");\n    this.readyState = \"open\";\n    Socket.priorWebsocketSuccess = \"websocket\" === this.transport.name;\n    this.emit(\"open\");\n    this.flush();\n\n    // we check for `readyState` in case an `open`\n    // listener already closed the socket\n    if (\n      \"open\" === this.readyState &&\n      this.opts.upgrade &&\n      this.transport.pause\n    ) {\n      debug(\"starting upgrade probes\");\n      let i = 0;\n      const l = this.upgrades.length;\n      for (; i < l; i++) {\n        this.probe(this.upgrades[i]);\n      }\n    }\n  }\n\n  /**\n   * Handles a packet.\n   *\n   * @api private\n   */\n  onPacket(packet) {\n    if (\n      \"opening\" === this.readyState ||\n      \"open\" === this.readyState ||\n      \"closing\" === this.readyState\n    ) {\n      debug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\n      this.emit(\"packet\", packet);\n\n      // Socket is live - any packet counts\n      this.emit(\"heartbeat\");\n\n      switch (packet.type) {\n        case \"open\":\n          this.onHandshake(JSON.parse(packet.data));\n          break;\n\n        case \"ping\":\n          this.resetPingTimeout();\n          this.sendPacket(\"pong\");\n          this.emit(\"pong\");\n          break;\n\n        case \"error\":\n          const err = new Error(\"server error\");\n          err.code = packet.data;\n          this.onError(err);\n          break;\n\n        case \"message\":\n          this.emit(\"data\", packet.data);\n          this.emit(\"message\", packet.data);\n          break;\n      }\n    } else {\n      debug('packet received with socket readyState \"%s\"', this.readyState);\n    }\n  }\n\n  /**\n   * Called upon handshake completion.\n   *\n   * @param {Object} handshake obj\n   * @api private\n   */\n  onHandshake(data) {\n    this.emit(\"handshake\", data);\n    this.id = data.sid;\n    this.transport.query.sid = data.sid;\n    this.upgrades = this.filterUpgrades(data.upgrades);\n    this.pingInterval = data.pingInterval;\n    this.pingTimeout = data.pingTimeout;\n    this.onOpen();\n    // In case open handler closes socket\n    if (\"closed\" === this.readyState) return;\n    this.resetPingTimeout();\n  }\n\n  /**\n   * Sets and resets ping timeout timer based on server pings.\n   *\n   * @api private\n   */\n  resetPingTimeout() {\n    clearTimeout(this.pingTimeoutTimer);\n    this.pingTimeoutTimer = setTimeout(() => {\n      this.onClose(\"ping timeout\");\n    }, this.pingInterval + this.pingTimeout);\n  }\n\n  /**\n   * Called on `drain` event\n   *\n   * @api private\n   */\n  onDrain() {\n    this.writeBuffer.splice(0, this.prevBufferLen);\n\n    // setting prevBufferLen = 0 is very important\n    // for example, when upgrading, upgrade packet is sent over,\n    // and a nonzero prevBufferLen could cause problems on `drain`\n    this.prevBufferLen = 0;\n\n    if (0 === this.writeBuffer.length) {\n      this.emit(\"drain\");\n    } else {\n      this.flush();\n    }\n  }\n\n  /**\n   * Flush write buffers.\n   *\n   * @api private\n   */\n  flush() {\n    if (\n      \"closed\" !== this.readyState &&\n      this.transport.writable &&\n      !this.upgrading &&\n      this.writeBuffer.length\n    ) {\n      debug(\"flushing %d packets in socket\", this.writeBuffer.length);\n      this.transport.send(this.writeBuffer);\n      // keep track of current length of writeBuffer\n      // splice writeBuffer and callbackBuffer on `drain`\n      this.prevBufferLen = this.writeBuffer.length;\n      this.emit(\"flush\");\n    }\n  }\n\n  /**\n   * Sends a message.\n   *\n   * @param {String} message.\n   * @param {Function} callback function.\n   * @param {Object} options.\n   * @return {Socket} for chaining.\n   * @api public\n   */\n  write(msg, options, fn) {\n    this.sendPacket(\"message\", msg, options, fn);\n    return this;\n  }\n\n  send(msg, options, fn) {\n    this.sendPacket(\"message\", msg, options, fn);\n    return this;\n  }\n\n  /**\n   * Sends a packet.\n   *\n   * @param {String} packet type.\n   * @param {String} data.\n   * @param {Object} options.\n   * @param {Function} callback function.\n   * @api private\n   */\n  sendPacket(type, data, options, fn) {\n    if (\"function\" === typeof data) {\n      fn = data;\n      data = undefined;\n    }\n\n    if (\"function\" === typeof options) {\n      fn = options;\n      options = null;\n    }\n\n    if (\"closing\" === this.readyState || \"closed\" === this.readyState) {\n      return;\n    }\n\n    options = options || {};\n    options.compress = false !== options.compress;\n\n    const packet = {\n      type: type,\n      data: data,\n      options: options\n    };\n    this.emit(\"packetCreate\", packet);\n    this.writeBuffer.push(packet);\n    if (fn) this.once(\"flush\", fn);\n    this.flush();\n  }\n\n  /**\n   * Closes the connection.\n   *\n   * @api private\n   */\n  close() {\n    const self = this;\n\n    if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n      this.readyState = \"closing\";\n\n      if (this.writeBuffer.length) {\n        this.once(\"drain\", function() {\n          if (this.upgrading) {\n            waitForUpgrade();\n          } else {\n            close();\n          }\n        });\n      } else if (this.upgrading) {\n        waitForUpgrade();\n      } else {\n        close();\n      }\n    }\n\n    function close() {\n      self.onClose(\"forced close\");\n      debug(\"socket closing - telling transport to close\");\n      self.transport.close();\n    }\n\n    function cleanupAndClose() {\n      self.removeListener(\"upgrade\", cleanupAndClose);\n      self.removeListener(\"upgradeError\", cleanupAndClose);\n      close();\n    }\n\n    function waitForUpgrade() {\n      // wait for upgrade to finish since we can't send packets while pausing a transport\n      self.once(\"upgrade\", cleanupAndClose);\n      self.once(\"upgradeError\", cleanupAndClose);\n    }\n\n    return this;\n  }\n\n  /**\n   * Called upon transport error\n   *\n   * @api private\n   */\n  onError(err) {\n    debug(\"socket error %j\", err);\n    Socket.priorWebsocketSuccess = false;\n    this.emit(\"error\", err);\n    this.onClose(\"transport error\", err);\n  }\n\n  /**\n   * Called upon transport close.\n   *\n   * @api private\n   */\n  onClose(reason, desc) {\n    if (\n      \"opening\" === this.readyState ||\n      \"open\" === this.readyState ||\n      \"closing\" === this.readyState\n    ) {\n      debug('socket close with reason: \"%s\"', reason);\n      const self = this;\n\n      // clear timers\n      clearTimeout(this.pingIntervalTimer);\n      clearTimeout(this.pingTimeoutTimer);\n\n      // stop event from firing again for transport\n      this.transport.removeAllListeners(\"close\");\n\n      // ensure transport won't stay open\n      this.transport.close();\n\n      // ignore further transport communication\n      this.transport.removeAllListeners();\n\n      // set ready state\n      this.readyState = \"closed\";\n\n      // clear session id\n      this.id = null;\n\n      // emit close event\n      this.emit(\"close\", reason, desc);\n\n      // clean buffers after, so users can still\n      // grab the buffers on `close` event\n      self.writeBuffer = [];\n      self.prevBufferLen = 0;\n    }\n  }\n\n  /**\n   * Filters upgrades, returning only those matching client transports.\n   *\n   * @param {Array} server upgrades\n   * @api private\n   *\n   */\n  filterUpgrades(upgrades) {\n    const filteredUpgrades = [];\n    let i = 0;\n    const j = upgrades.length;\n    for (; i < j; i++) {\n      if (~this.transports.indexOf(upgrades[i]))\n        filteredUpgrades.push(upgrades[i]);\n    }\n    return filteredUpgrades;\n  }\n}\n\nSocket.priorWebsocketSuccess = false;\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nSocket.protocol = parser.protocol; // this is an int\n\nfunction clone(obj) {\n  const o = {};\n  for (let i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      o[i] = obj[i];\n    }\n  }\n  return o;\n}\n\nmodule.exports = Socket;\n","const Socket = require(\"./socket\");\n\nmodule.exports = (uri, opts) => new Socket(uri, opts);\n\n/**\n * Expose deps for legacy compatibility\n * and standalone browser access.\n */\n\nmodule.exports.Socket = Socket;\nmodule.exports.protocol = Socket.protocol; // this is an int\nmodule.exports.Transport = require(\"./transport\");\nmodule.exports.transports = require(\"./transports/index\");\nmodule.exports.parser = require(\"engine.io-parser\");\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hasBinary = exports.isBinary = void 0;\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj.buffer instanceof ArrayBuffer;\n};\nconst toString = Object.prototype.toString;\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeFile = typeof File === \"function\" ||\n    (typeof File !== \"undefined\" &&\n        toString.call(File) === \"[object FileConstructor]\");\n/**\n * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File.\n *\n * @private\n */\nfunction isBinary(obj) {\n    return ((withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj))) ||\n        (withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File));\n}\nexports.isBinary = isBinary;\nfunction hasBinary(obj, toJSON) {\n    if (!obj || typeof obj !== \"object\") {\n        return false;\n    }\n    if (Array.isArray(obj)) {\n        for (let i = 0, l = obj.length; i < l; i++) {\n            if (hasBinary(obj[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n    if (isBinary(obj)) {\n        return true;\n    }\n    if (obj.toJSON &&\n        typeof obj.toJSON === \"function\" &&\n        arguments.length === 1) {\n        return hasBinary(obj.toJSON(), true);\n    }\n    for (const key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n            return true;\n        }\n    }\n    return false;\n}\nexports.hasBinary = hasBinary;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.reconstructPacket = exports.deconstructPacket = void 0;\nconst is_binary_1 = require(\"./is-binary\");\n/**\n * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @public\n */\nfunction deconstructPacket(packet) {\n    const buffers = [];\n    const packetData = packet.data;\n    const pack = packet;\n    pack.data = _deconstructPacket(packetData, buffers);\n    pack.attachments = buffers.length; // number of binary 'attachments'\n    return { packet: pack, buffers: buffers };\n}\nexports.deconstructPacket = deconstructPacket;\nfunction _deconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (is_binary_1.isBinary(data)) {\n        const placeholder = { _placeholder: true, num: buffers.length };\n        buffers.push(data);\n        return placeholder;\n    }\n    else if (Array.isArray(data)) {\n        const newData = new Array(data.length);\n        for (let i = 0; i < data.length; i++) {\n            newData[i] = _deconstructPacket(data[i], buffers);\n        }\n        return newData;\n    }\n    else if (typeof data === \"object\" && !(data instanceof Date)) {\n        const newData = {};\n        for (const key in data) {\n            if (data.hasOwnProperty(key)) {\n                newData[key] = _deconstructPacket(data[key], buffers);\n            }\n        }\n        return newData;\n    }\n    return data;\n}\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @public\n */\nfunction reconstructPacket(packet, buffers) {\n    packet.data = _reconstructPacket(packet.data, buffers);\n    packet.attachments = undefined; // no longer useful\n    return packet;\n}\nexports.reconstructPacket = reconstructPacket;\nfunction _reconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (data && data._placeholder) {\n        return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n    }\n    else if (Array.isArray(data)) {\n        for (let i = 0; i < data.length; i++) {\n            data[i] = _reconstructPacket(data[i], buffers);\n        }\n    }\n    else if (typeof data === \"object\") {\n        for (const key in data) {\n            if (data.hasOwnProperty(key)) {\n                data[key] = _reconstructPacket(data[key], buffers);\n            }\n        }\n    }\n    return data;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Decoder = exports.Encoder = exports.PacketType = exports.protocol = void 0;\nconst Emitter = require(\"component-emitter\");\nconst binary_1 = require(\"./binary\");\nconst is_binary_1 = require(\"./is-binary\");\nconst debug = require(\"debug\")(\"socket.io-parser\");\n/**\n * Protocol version.\n *\n * @public\n */\nexports.protocol = 5;\nvar PacketType;\n(function (PacketType) {\n    PacketType[PacketType[\"CONNECT\"] = 0] = \"CONNECT\";\n    PacketType[PacketType[\"DISCONNECT\"] = 1] = \"DISCONNECT\";\n    PacketType[PacketType[\"EVENT\"] = 2] = \"EVENT\";\n    PacketType[PacketType[\"ACK\"] = 3] = \"ACK\";\n    PacketType[PacketType[\"CONNECT_ERROR\"] = 4] = \"CONNECT_ERROR\";\n    PacketType[PacketType[\"BINARY_EVENT\"] = 5] = \"BINARY_EVENT\";\n    PacketType[PacketType[\"BINARY_ACK\"] = 6] = \"BINARY_ACK\";\n})(PacketType = exports.PacketType || (exports.PacketType = {}));\n/**\n * A socket.io Encoder instance\n */\nclass Encoder {\n    /**\n     * Encode a packet as a single string if non-binary, or as a\n     * buffer sequence, depending on packet type.\n     *\n     * @param {Object} obj - packet object\n     */\n    encode(obj) {\n        debug(\"encoding packet %j\", obj);\n        if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) {\n            if (is_binary_1.hasBinary(obj)) {\n                obj.type =\n                    obj.type === PacketType.EVENT\n                        ? PacketType.BINARY_EVENT\n                        : PacketType.BINARY_ACK;\n                return this.encodeAsBinary(obj);\n            }\n        }\n        return [this.encodeAsString(obj)];\n    }\n    /**\n     * Encode packet as string.\n     */\n    encodeAsString(obj) {\n        // first is type\n        let str = \"\" + obj.type;\n        // attachments if we have them\n        if (obj.type === PacketType.BINARY_EVENT ||\n            obj.type === PacketType.BINARY_ACK) {\n            str += obj.attachments + \"-\";\n        }\n        // if we have a namespace other than `/`\n        // we append it followed by a comma `,`\n        if (obj.nsp && \"/\" !== obj.nsp) {\n            str += obj.nsp + \",\";\n        }\n        // immediately followed by the id\n        if (null != obj.id) {\n            str += obj.id;\n        }\n        // json data\n        if (null != obj.data) {\n            str += JSON.stringify(obj.data);\n        }\n        debug(\"encoded %j as %s\", obj, str);\n        return str;\n    }\n    /**\n     * Encode packet as 'buffer sequence' by removing blobs, and\n     * deconstructing packet into object with placeholders and\n     * a list of buffers.\n     */\n    encodeAsBinary(obj) {\n        const deconstruction = binary_1.deconstructPacket(obj);\n        const pack = this.encodeAsString(deconstruction.packet);\n        const buffers = deconstruction.buffers;\n        buffers.unshift(pack); // add packet info to beginning of data list\n        return buffers; // write all the buffers\n    }\n}\nexports.Encoder = Encoder;\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n */\nclass Decoder extends Emitter {\n    constructor() {\n        super();\n    }\n    /**\n     * Decodes an encoded packet string into packet JSON.\n     *\n     * @param {String} obj - encoded packet\n     */\n    add(obj) {\n        let packet;\n        if (typeof obj === \"string\") {\n            packet = this.decodeString(obj);\n            if (packet.type === PacketType.BINARY_EVENT ||\n                packet.type === PacketType.BINARY_ACK) {\n                // binary packet's json\n                this.reconstructor = new BinaryReconstructor(packet);\n                // no attachments, labeled binary but no binary data to follow\n                if (packet.attachments === 0) {\n                    super.emit(\"decoded\", packet);\n                }\n            }\n            else {\n                // non-binary full packet\n                super.emit(\"decoded\", packet);\n            }\n        }\n        else if (is_binary_1.isBinary(obj) || obj.base64) {\n            // raw binary data\n            if (!this.reconstructor) {\n                throw new Error(\"got binary data when not reconstructing a packet\");\n            }\n            else {\n                packet = this.reconstructor.takeBinaryData(obj);\n                if (packet) {\n                    // received final buffer\n                    this.reconstructor = null;\n                    super.emit(\"decoded\", packet);\n                }\n            }\n        }\n        else {\n            throw new Error(\"Unknown type: \" + obj);\n        }\n    }\n    /**\n     * Decode a packet String (JSON data)\n     *\n     * @param {String} str\n     * @return {Object} packet\n     */\n    decodeString(str) {\n        let i = 0;\n        // look up type\n        const p = {\n            type: Number(str.charAt(0)),\n        };\n        if (PacketType[p.type] === undefined) {\n            throw new Error(\"unknown packet type \" + p.type);\n        }\n        // look up attachments if type binary\n        if (p.type === PacketType.BINARY_EVENT ||\n            p.type === PacketType.BINARY_ACK) {\n            const start = i + 1;\n            while (str.charAt(++i) !== \"-\" && i != str.length) { }\n            const buf = str.substring(start, i);\n            if (buf != Number(buf) || str.charAt(i) !== \"-\") {\n                throw new Error(\"Illegal attachments\");\n            }\n            p.attachments = Number(buf);\n        }\n        // look up namespace (if any)\n        if (\"/\" === str.charAt(i + 1)) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (\",\" === c)\n                    break;\n                if (i === str.length)\n                    break;\n            }\n            p.nsp = str.substring(start, i);\n        }\n        else {\n            p.nsp = \"/\";\n        }\n        // look up id\n        const next = str.charAt(i + 1);\n        if (\"\" !== next && Number(next) == next) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (null == c || Number(c) != c) {\n                    --i;\n                    break;\n                }\n                if (i === str.length)\n                    break;\n            }\n            p.id = Number(str.substring(start, i + 1));\n        }\n        // look up json data\n        if (str.charAt(++i)) {\n            const payload = tryParse(str.substr(i));\n            if (Decoder.isPayloadValid(p.type, payload)) {\n                p.data = payload;\n            }\n            else {\n                throw new Error(\"invalid payload\");\n            }\n        }\n        debug(\"decoded %s as %j\", str, p);\n        return p;\n    }\n    static isPayloadValid(type, payload) {\n        switch (type) {\n            case PacketType.CONNECT:\n                return typeof payload === \"object\";\n            case PacketType.DISCONNECT:\n                return payload === undefined;\n            case PacketType.CONNECT_ERROR:\n                return typeof payload === \"string\" || typeof payload === \"object\";\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                return Array.isArray(payload) && payload.length > 0;\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                return Array.isArray(payload);\n        }\n    }\n    /**\n     * Deallocates a parser's resources\n     */\n    destroy() {\n        if (this.reconstructor) {\n            this.reconstructor.finishedReconstruction();\n        }\n    }\n}\nexports.Decoder = Decoder;\nfunction tryParse(str) {\n    try {\n        return JSON.parse(str);\n    }\n    catch (e) {\n        return false;\n    }\n}\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n */\nclass BinaryReconstructor {\n    constructor(packet) {\n        this.packet = packet;\n        this.buffers = [];\n        this.reconPack = packet;\n    }\n    /**\n     * Method to be called when binary data received from connection\n     * after a BINARY_EVENT packet.\n     *\n     * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n     * @return {null | Object} returns null if more binary data is expected or\n     *   a reconstructed packet object if all buffers have been received.\n     */\n    takeBinaryData(binData) {\n        this.buffers.push(binData);\n        if (this.buffers.length === this.reconPack.attachments) {\n            // done with buffer list\n            const packet = binary_1.reconstructPacket(this.reconPack, this.buffers);\n            this.finishedReconstruction();\n            return packet;\n        }\n        return null;\n    }\n    /**\n     * Cleans up binary packet reconstruction variables.\n     */\n    finishedReconstruction() {\n        this.reconPack = null;\n        this.buffers = [];\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.on = void 0;\nfunction on(obj, ev, fn) {\n    obj.on(ev, fn);\n    return function subDestroy() {\n        obj.off(ev, fn);\n    };\n}\nexports.on = on;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Socket = void 0;\nconst socket_io_parser_1 = require(\"socket.io-parser\");\nconst Emitter = require(\"component-emitter\");\nconst on_1 = require(\"./on\");\nconst debug = require(\"debug\")(\"socket.io-client:socket\");\n/**\n * Internal events.\n * These events can't be emitted by the user.\n */\nconst RESERVED_EVENTS = Object.freeze({\n    connect: 1,\n    connect_error: 1,\n    disconnect: 1,\n    disconnecting: 1,\n    // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener\n    newListener: 1,\n    removeListener: 1,\n});\nclass Socket extends Emitter {\n    /**\n     * `Socket` constructor.\n     *\n     * @public\n     */\n    constructor(io, nsp, opts) {\n        super();\n        this.receiveBuffer = [];\n        this.sendBuffer = [];\n        this.ids = 0;\n        this.acks = {};\n        this.flags = {};\n        this.io = io;\n        this.nsp = nsp;\n        this.ids = 0;\n        this.acks = {};\n        this.receiveBuffer = [];\n        this.sendBuffer = [];\n        this.connected = false;\n        this.disconnected = true;\n        this.flags = {};\n        if (opts && opts.auth) {\n            this.auth = opts.auth;\n        }\n        if (this.io._autoConnect)\n            this.open();\n    }\n    /**\n     * Subscribe to open, close and packet events\n     *\n     * @private\n     */\n    subEvents() {\n        if (this.subs)\n            return;\n        const io = this.io;\n        this.subs = [\n            on_1.on(io, \"open\", this.onopen.bind(this)),\n            on_1.on(io, \"packet\", this.onpacket.bind(this)),\n            on_1.on(io, \"error\", this.onerror.bind(this)),\n            on_1.on(io, \"close\", this.onclose.bind(this)),\n        ];\n    }\n    /**\n     * Whether the Socket will try to reconnect when its Manager connects or reconnects\n     */\n    get active() {\n        return !!this.subs;\n    }\n    /**\n     * \"Opens\" the socket.\n     *\n     * @public\n     */\n    connect() {\n        if (this.connected)\n            return this;\n        this.subEvents();\n        if (!this.io[\"_reconnecting\"])\n            this.io.open(); // ensure open\n        if (\"open\" === this.io._readyState)\n            this.onopen();\n        return this;\n    }\n    /**\n     * Alias for connect()\n     */\n    open() {\n        return this.connect();\n    }\n    /**\n     * Sends a `message` event.\n     *\n     * @return self\n     * @public\n     */\n    send(...args) {\n        args.unshift(\"message\");\n        this.emit.apply(this, args);\n        return this;\n    }\n    /**\n     * Override `emit`.\n     * If the event is in `events`, it's emitted normally.\n     *\n     * @param ev - event name\n     * @return self\n     * @public\n     */\n    emit(ev, ...args) {\n        if (RESERVED_EVENTS.hasOwnProperty(ev)) {\n            throw new Error('\"' + ev + '\" is a reserved event name');\n        }\n        args.unshift(ev);\n        const packet = {\n            type: socket_io_parser_1.PacketType.EVENT,\n            data: args,\n        };\n        packet.options = {};\n        packet.options.compress = this.flags.compress !== false;\n        // event ack callback\n        if (\"function\" === typeof args[args.length - 1]) {\n            debug(\"emitting packet with ack id %d\", this.ids);\n            this.acks[this.ids] = args.pop();\n            packet.id = this.ids++;\n        }\n        const isTransportWritable = this.io.engine &&\n            this.io.engine.transport &&\n            this.io.engine.transport.writable;\n        const discardPacket = this.flags.volatile && (!isTransportWritable || !this.connected);\n        if (discardPacket) {\n            debug(\"discard packet as the transport is not currently writable\");\n        }\n        else if (this.connected) {\n            this.packet(packet);\n        }\n        else {\n            this.sendBuffer.push(packet);\n        }\n        this.flags = {};\n        return this;\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param packet\n     * @private\n     */\n    packet(packet) {\n        packet.nsp = this.nsp;\n        this.io._packet(packet);\n    }\n    /**\n     * Called upon engine `open`.\n     *\n     * @private\n     */\n    onopen() {\n        debug(\"transport is open - connecting\");\n        if (typeof this.auth == \"function\") {\n            this.auth((data) => {\n                this.packet({ type: socket_io_parser_1.PacketType.CONNECT, data });\n            });\n        }\n        else {\n            this.packet({ type: socket_io_parser_1.PacketType.CONNECT, data: this.auth });\n        }\n    }\n    /**\n     * Called upon engine or manager `error`.\n     *\n     * @param err\n     * @private\n     */\n    onerror(err) {\n        if (!this.connected) {\n            super.emit(\"connect_error\", err);\n        }\n    }\n    /**\n     * Called upon engine `close`.\n     *\n     * @param reason\n     * @private\n     */\n    onclose(reason) {\n        debug(\"close (%s)\", reason);\n        this.connected = false;\n        this.disconnected = true;\n        delete this.id;\n        super.emit(\"disconnect\", reason);\n    }\n    /**\n     * Called with socket packet.\n     *\n     * @param packet\n     * @private\n     */\n    onpacket(packet) {\n        const sameNamespace = packet.nsp === this.nsp;\n        if (!sameNamespace)\n            return;\n        switch (packet.type) {\n            case socket_io_parser_1.PacketType.CONNECT:\n                if (packet.data && packet.data.sid) {\n                    const id = packet.data.sid;\n                    this.onconnect(id);\n                }\n                else {\n                    super.emit(\"connect_error\", new Error(\"It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)\"));\n                }\n                break;\n            case socket_io_parser_1.PacketType.EVENT:\n                this.onevent(packet);\n                break;\n            case socket_io_parser_1.PacketType.BINARY_EVENT:\n                this.onevent(packet);\n                break;\n            case socket_io_parser_1.PacketType.ACK:\n                this.onack(packet);\n                break;\n            case socket_io_parser_1.PacketType.BINARY_ACK:\n                this.onack(packet);\n                break;\n            case socket_io_parser_1.PacketType.DISCONNECT:\n                this.ondisconnect();\n                break;\n            case socket_io_parser_1.PacketType.CONNECT_ERROR:\n                const err = new Error(packet.data.message);\n                // @ts-ignore\n                err.data = packet.data.data;\n                super.emit(\"connect_error\", err);\n                break;\n        }\n    }\n    /**\n     * Called upon a server event.\n     *\n     * @param packet\n     * @private\n     */\n    onevent(packet) {\n        const args = packet.data || [];\n        debug(\"emitting event %j\", args);\n        if (null != packet.id) {\n            debug(\"attaching ack callback to event\");\n            args.push(this.ack(packet.id));\n        }\n        if (this.connected) {\n            this.emitEvent(args);\n        }\n        else {\n            this.receiveBuffer.push(Object.freeze(args));\n        }\n    }\n    emitEvent(args) {\n        if (this._anyListeners && this._anyListeners.length) {\n            const listeners = this._anyListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, args);\n            }\n        }\n        super.emit.apply(this, args);\n    }\n    /**\n     * Produces an ack callback to emit with an event.\n     *\n     * @private\n     */\n    ack(id) {\n        const self = this;\n        let sent = false;\n        return function (...args) {\n            // prevent double callbacks\n            if (sent)\n                return;\n            sent = true;\n            debug(\"sending ack %j\", args);\n            self.packet({\n                type: socket_io_parser_1.PacketType.ACK,\n                id: id,\n                data: args,\n            });\n        };\n    }\n    /**\n     * Called upon a server acknowlegement.\n     *\n     * @param packet\n     * @private\n     */\n    onack(packet) {\n        const ack = this.acks[packet.id];\n        if (\"function\" === typeof ack) {\n            debug(\"calling ack %s with %j\", packet.id, packet.data);\n            ack.apply(this, packet.data);\n            delete this.acks[packet.id];\n        }\n        else {\n            debug(\"bad ack %s\", packet.id);\n        }\n    }\n    /**\n     * Called upon server connect.\n     *\n     * @private\n     */\n    onconnect(id) {\n        debug(\"socket connected with id %s\", id);\n        this.id = id;\n        this.connected = true;\n        this.disconnected = false;\n        super.emit(\"connect\");\n        this.emitBuffered();\n    }\n    /**\n     * Emit buffered events (received and emitted).\n     *\n     * @private\n     */\n    emitBuffered() {\n        this.receiveBuffer.forEach((args) => this.emitEvent(args));\n        this.receiveBuffer = [];\n        this.sendBuffer.forEach((packet) => this.packet(packet));\n        this.sendBuffer = [];\n    }\n    /**\n     * Called upon server disconnect.\n     *\n     * @private\n     */\n    ondisconnect() {\n        debug(\"server disconnect (%s)\", this.nsp);\n        this.destroy();\n        this.onclose(\"io server disconnect\");\n    }\n    /**\n     * Called upon forced client/server side disconnections,\n     * this method ensures the manager stops tracking us and\n     * that reconnections don't get triggered for this.\n     *\n     * @private\n     */\n    destroy() {\n        if (this.subs) {\n            // clean subscriptions to avoid reconnections\n            this.subs.forEach((subDestroy) => subDestroy());\n            this.subs = undefined;\n        }\n        this.io[\"_destroy\"](this);\n    }\n    /**\n     * Disconnects the socket manually.\n     *\n     * @return self\n     * @public\n     */\n    disconnect() {\n        if (this.connected) {\n            debug(\"performing disconnect (%s)\", this.nsp);\n            this.packet({ type: socket_io_parser_1.PacketType.DISCONNECT });\n        }\n        // remove socket from pool\n        this.destroy();\n        if (this.connected) {\n            // fire events\n            this.onclose(\"io client disconnect\");\n        }\n        return this;\n    }\n    /**\n     * Alias for disconnect()\n     *\n     * @return self\n     * @public\n     */\n    close() {\n        return this.disconnect();\n    }\n    /**\n     * Sets the compress flag.\n     *\n     * @param compress - if `true`, compresses the sending data\n     * @return self\n     * @public\n     */\n    compress(compress) {\n        this.flags.compress = compress;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not\n     * ready to send messages.\n     *\n     * @returns self\n     * @public\n     */\n    get volatile() {\n        this.flags.volatile = true;\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * @param listener\n     * @public\n     */\n    onAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * @param listener\n     * @public\n     */\n    prependAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @param listener\n     * @public\n     */\n    offAny(listener) {\n        if (!this._anyListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     *\n     * @public\n     */\n    listenersAny() {\n        return this._anyListeners || [];\n    }\n}\nexports.Socket = Socket;\n","\n/**\n * Expose `Backoff`.\n */\n\nmodule.exports = Backoff;\n\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function(){\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var rand =  Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n  }\n  return Math.min(ms, this.max) | 0;\n};\n\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\nBackoff.prototype.reset = function(){\n  this.attempts = 0;\n};\n\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMin = function(min){\n  this.ms = min;\n};\n\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMax = function(max){\n  this.max = max;\n};\n\n/**\n * Set the jitter\n *\n * @api public\n */\n\nBackoff.prototype.setJitter = function(jitter){\n  this.jitter = jitter;\n};\n\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Manager = void 0;\nconst eio = require(\"engine.io-client\");\nconst socket_1 = require(\"./socket\");\nconst Emitter = require(\"component-emitter\");\nconst parser = require(\"socket.io-parser\");\nconst on_1 = require(\"./on\");\nconst Backoff = require(\"backo2\");\nconst debug = require(\"debug\")(\"socket.io-client:manager\");\nclass Manager extends Emitter {\n    constructor(uri, opts) {\n        super();\n        this.nsps = {};\n        this.subs = [];\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = undefined;\n        }\n        opts = opts || {};\n        opts.path = opts.path || \"/socket.io\";\n        this.opts = opts;\n        this.reconnection(opts.reconnection !== false);\n        this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n        this.reconnectionDelay(opts.reconnectionDelay || 1000);\n        this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n        this.randomizationFactor(opts.randomizationFactor || 0.5);\n        this.backoff = new Backoff({\n            min: this.reconnectionDelay(),\n            max: this.reconnectionDelayMax(),\n            jitter: this.randomizationFactor(),\n        });\n        this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n        this._readyState = \"closed\";\n        this.uri = uri;\n        const _parser = opts.parser || parser;\n        this.encoder = new _parser.Encoder();\n        this.decoder = new _parser.Decoder();\n        this._autoConnect = opts.autoConnect !== false;\n        if (this._autoConnect)\n            this.open();\n    }\n    reconnection(v) {\n        if (!arguments.length)\n            return this._reconnection;\n        this._reconnection = !!v;\n        return this;\n    }\n    reconnectionAttempts(v) {\n        if (v === undefined)\n            return this._reconnectionAttempts;\n        this._reconnectionAttempts = v;\n        return this;\n    }\n    reconnectionDelay(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelay;\n        this._reconnectionDelay = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);\n        return this;\n    }\n    randomizationFactor(v) {\n        var _a;\n        if (v === undefined)\n            return this._randomizationFactor;\n        this._randomizationFactor = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);\n        return this;\n    }\n    reconnectionDelayMax(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelayMax;\n        this._reconnectionDelayMax = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);\n        return this;\n    }\n    timeout(v) {\n        if (!arguments.length)\n            return this._timeout;\n        this._timeout = v;\n        return this;\n    }\n    /**\n     * Starts trying to reconnect if reconnection is enabled and we have not\n     * started reconnecting yet\n     *\n     * @private\n     */\n    maybeReconnectOnOpen() {\n        // Only try to reconnect if it's the first time we're connecting\n        if (!this._reconnecting &&\n            this._reconnection &&\n            this.backoff.attempts === 0) {\n            // keeps reconnection from firing twice for the same reconnection loop\n            this.reconnect();\n        }\n    }\n    /**\n     * Sets the current transport `socket`.\n     *\n     * @param {Function} fn - optional, callback\n     * @return self\n     * @public\n     */\n    open(fn) {\n        debug(\"readyState %s\", this._readyState);\n        if (~this._readyState.indexOf(\"open\"))\n            return this;\n        debug(\"opening %s\", this.uri);\n        this.engine = eio(this.uri, this.opts);\n        const socket = this.engine;\n        const self = this;\n        this._readyState = \"opening\";\n        this.skipReconnect = false;\n        // emit `open`\n        const openSubDestroy = on_1.on(socket, \"open\", function () {\n            self.onopen();\n            fn && fn();\n        });\n        // emit `error`\n        const errorSub = on_1.on(socket, \"error\", (err) => {\n            debug(\"error\");\n            self.cleanup();\n            self._readyState = \"closed\";\n            super.emit(\"error\", err);\n            if (fn) {\n                fn(err);\n            }\n            else {\n                // Only do this if there is no fn to handle the error\n                self.maybeReconnectOnOpen();\n            }\n        });\n        if (false !== this._timeout) {\n            const timeout = this._timeout;\n            debug(\"connect attempt will timeout after %d\", timeout);\n            if (timeout === 0) {\n                openSubDestroy(); // prevents a race condition with the 'open' event\n            }\n            // set timer\n            const timer = setTimeout(() => {\n                debug(\"connect attempt timed out after %d\", timeout);\n                openSubDestroy();\n                socket.close();\n                socket.emit(\"error\", new Error(\"timeout\"));\n            }, timeout);\n            this.subs.push(function subDestroy() {\n                clearTimeout(timer);\n            });\n        }\n        this.subs.push(openSubDestroy);\n        this.subs.push(errorSub);\n        return this;\n    }\n    /**\n     * Alias for open()\n     *\n     * @return self\n     * @public\n     */\n    connect(fn) {\n        return this.open(fn);\n    }\n    /**\n     * Called upon transport open.\n     *\n     * @private\n     */\n    onopen() {\n        debug(\"open\");\n        // clear old subs\n        this.cleanup();\n        // mark as open\n        this._readyState = \"open\";\n        super.emit(\"open\");\n        // add new subs\n        const socket = this.engine;\n        this.subs.push(on_1.on(socket, \"ping\", this.onping.bind(this)), on_1.on(socket, \"data\", this.ondata.bind(this)), on_1.on(socket, \"error\", this.onerror.bind(this)), on_1.on(socket, \"close\", this.onclose.bind(this)), on_1.on(this.decoder, \"decoded\", this.ondecoded.bind(this)));\n    }\n    /**\n     * Called upon a ping.\n     *\n     * @private\n     */\n    onping() {\n        super.emit(\"ping\");\n    }\n    /**\n     * Called with data.\n     *\n     * @private\n     */\n    ondata(data) {\n        this.decoder.add(data);\n    }\n    /**\n     * Called when parser fully decodes a packet.\n     *\n     * @private\n     */\n    ondecoded(packet) {\n        super.emit(\"packet\", packet);\n    }\n    /**\n     * Called upon socket error.\n     *\n     * @private\n     */\n    onerror(err) {\n        debug(\"error\", err);\n        super.emit(\"error\", err);\n    }\n    /**\n     * Creates a new socket for the given `nsp`.\n     *\n     * @return {Socket}\n     * @public\n     */\n    socket(nsp, opts) {\n        let socket = this.nsps[nsp];\n        if (!socket) {\n            socket = new socket_1.Socket(this, nsp, opts);\n            this.nsps[nsp] = socket;\n        }\n        return socket;\n    }\n    /**\n     * Called upon a socket close.\n     *\n     * @param socket\n     * @private\n     */\n    _destroy(socket) {\n        const nsps = Object.keys(this.nsps);\n        for (const nsp of nsps) {\n            const socket = this.nsps[nsp];\n            if (socket.active) {\n                debug(\"socket %s is still active, skipping close\", nsp);\n                return;\n            }\n        }\n        this._close();\n    }\n    /**\n     * Writes a packet.\n     *\n     * @param packet\n     * @private\n     */\n    _packet(packet) {\n        debug(\"writing packet %j\", packet);\n        const encodedPackets = this.encoder.encode(packet);\n        for (let i = 0; i < encodedPackets.length; i++) {\n            this.engine.write(encodedPackets[i], packet.options);\n        }\n    }\n    /**\n     * Clean up transport subscriptions and packet buffer.\n     *\n     * @private\n     */\n    cleanup() {\n        debug(\"cleanup\");\n        this.subs.forEach((subDestroy) => subDestroy());\n        this.subs.length = 0;\n        this.decoder.destroy();\n    }\n    /**\n     * Close the current socket.\n     *\n     * @private\n     */\n    _close() {\n        debug(\"disconnect\");\n        this.skipReconnect = true;\n        this._reconnecting = false;\n        if (\"opening\" === this._readyState) {\n            // `onclose` will not fire because\n            // an open event never happened\n            this.cleanup();\n        }\n        this.backoff.reset();\n        this._readyState = \"closed\";\n        if (this.engine)\n            this.engine.close();\n    }\n    /**\n     * Alias for close()\n     *\n     * @private\n     */\n    disconnect() {\n        return this._close();\n    }\n    /**\n     * Called upon engine close.\n     *\n     * @private\n     */\n    onclose(reason) {\n        debug(\"onclose\");\n        this.cleanup();\n        this.backoff.reset();\n        this._readyState = \"closed\";\n        super.emit(\"close\", reason);\n        if (this._reconnection && !this.skipReconnect) {\n            this.reconnect();\n        }\n    }\n    /**\n     * Attempt a reconnection.\n     *\n     * @private\n     */\n    reconnect() {\n        if (this._reconnecting || this.skipReconnect)\n            return this;\n        const self = this;\n        if (this.backoff.attempts >= this._reconnectionAttempts) {\n            debug(\"reconnect failed\");\n            this.backoff.reset();\n            super.emit(\"reconnect_failed\");\n            this._reconnecting = false;\n        }\n        else {\n            const delay = this.backoff.duration();\n            debug(\"will wait %dms before reconnect attempt\", delay);\n            this._reconnecting = true;\n            const timer = setTimeout(() => {\n                if (self.skipReconnect)\n                    return;\n                debug(\"attempting reconnect\");\n                super.emit(\"reconnect_attempt\", self.backoff.attempts);\n                // check again for the case socket closed in above events\n                if (self.skipReconnect)\n                    return;\n                self.open((err) => {\n                    if (err) {\n                        debug(\"reconnect attempt error\");\n                        self._reconnecting = false;\n                        self.reconnect();\n                        super.emit(\"reconnect_error\", err);\n                    }\n                    else {\n                        debug(\"reconnect success\");\n                        self.onreconnect();\n                    }\n                });\n            }, delay);\n            this.subs.push(function subDestroy() {\n                clearTimeout(timer);\n            });\n        }\n    }\n    /**\n     * Called upon successful reconnect.\n     *\n     * @private\n     */\n    onreconnect() {\n        const attempt = this.backoff.attempts;\n        this._reconnecting = false;\n        this.backoff.reset();\n        super.emit(\"reconnect\", attempt);\n    }\n}\nexports.Manager = Manager;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Socket = exports.io = exports.Manager = exports.protocol = void 0;\nconst url_1 = require(\"./url\");\nconst manager_1 = require(\"./manager\");\nconst socket_1 = require(\"./socket\");\nObject.defineProperty(exports, \"Socket\", { enumerable: true, get: function () { return socket_1.Socket; } });\nconst debug = require(\"debug\")(\"socket.io-client\");\n/**\n * Module exports.\n */\nmodule.exports = exports = lookup;\n/**\n * Managers cache.\n */\nconst cache = (exports.managers = {});\nfunction lookup(uri, opts) {\n    if (typeof uri === \"object\") {\n        opts = uri;\n        uri = undefined;\n    }\n    opts = opts || {};\n    const parsed = url_1.url(uri, opts.path);\n    const source = parsed.source;\n    const id = parsed.id;\n    const path = parsed.path;\n    const sameNamespace = cache[id] && path in cache[id][\"nsps\"];\n    const newConnection = opts.forceNew ||\n        opts[\"force new connection\"] ||\n        false === opts.multiplex ||\n        sameNamespace;\n    let io;\n    if (newConnection) {\n        debug(\"ignoring socket cache for %s\", source);\n        io = new manager_1.Manager(source, opts);\n    }\n    else {\n        if (!cache[id]) {\n            debug(\"new io instance for %s\", source);\n            cache[id] = new manager_1.Manager(source, opts);\n        }\n        io = cache[id];\n    }\n    if (parsed.query && !opts.query) {\n        opts.query = parsed.queryKey;\n    }\n    return io.socket(parsed.path, opts);\n}\nexports.io = lookup;\n/**\n * Protocol version.\n *\n * @public\n */\nvar socket_io_parser_1 = require(\"socket.io-parser\");\nObject.defineProperty(exports, \"protocol\", { enumerable: true, get: function () { return socket_io_parser_1.protocol; } });\n/**\n * `connect`.\n *\n * @param {String} uri\n * @public\n */\nexports.connect = lookup;\n/**\n * Expose constructors for standalone build.\n *\n * @public\n */\nvar manager_2 = require(\"./manager\");\nObject.defineProperty(exports, \"Manager\", { enumerable: true, get: function () { return manager_2.Manager; } });\n","const { deepFreeze } = require('@keg-hub/jsutils')\n\nconst TAG_PREFIX = 'SOCKr'\n\nconst EventTypes = deepFreeze({\n  // General\n  INIT: `${TAG_PREFIX}:INIT`,\n  SET_ID: `${TAG_PREFIX}:SET_ID`,\n  CONNECT: `${TAG_PREFIX}:CONNECT`,\n\n  // STORE\n  UPDATE_STORE: `${TAG_PREFIX}:UPDATE_STORE`,\n\n  // Auth\n  AUTH_TOKEN: `${TAG_PREFIX}:AUTH_TOKEN`,\n  NOT_AUTHORIZED: `${TAG_PREFIX}:NOT_AUTHORIZED`,\n\n  // Peer\n  ADD_PEER: `${TAG_PREFIX}:ADD_PEER`,\n  PEER_DISCONNECT: `${TAG_PREFIX}:PEER_DISCONNECT`,\n\n  // Command\n  SET_CMDS: `${TAG_PREFIX}:SET_CMDS`,\n  RUN_CMD: `${TAG_PREFIX}:RUN_CMD`,\n  CMD_RUNNING: `${TAG_PREFIX}:CMD_RUNNING`,\n  CMD_END: `${TAG_PREFIX}:CMD_END`,\n  CMD_OUT: `${TAG_PREFIX}:CMD_OUT`,\n  CMD_ERR: `${TAG_PREFIX}:CMD_ERR`,\n  CMD_FAIL: `${TAG_PREFIX}:CMD_FAIL`,\n})\n\nmodule.exports = {\n  EventTypes,\n  tagPrefix: TAG_PREFIX,\n}\n","import { getDispatch } from '../reducer/sockrState'\nimport { EventTypes } from '../../constants/eventTypes'\n\n/**\n * Dispatches a connected peers id\n * @param {Object} id - Id of the peer that has connected\n * @param {Array} peers - Currently connected peers\n *\n * @returns {void}\n */\nexport const addPeer = ({ id, peers }) => {\n  return getDispatch()({\n    type: EventTypes.ADD_PEER,\n    id,\n    peers,\n  })\n}\n","import { getDispatch } from '../reducer/sockrState'\nimport { EventTypes } from '../../constants/eventTypes'\n\n/**\n * Dispatches that a peer has disconnected\n * @param {Object} id - Id of the connected socket\n * @param {Boolean} isRunning - Is the backend running a command\n * @param {Boolean} data - Extra metadata sent from the backend\n *\n * @returns {void}\n */\nexport const setId = ({ id, data, isRunning }) => {\n  getDispatch()({\n    type: EventTypes.SET_ID,\n    id,\n    isRunning,\n    ...data,\n  })\n}\n","import { getDispatch } from '../reducer/sockrState'\nimport { EventTypes } from '../../constants/eventTypes'\n\n/**\n * Dispatches passed in commands to the reducers\n * @param {Object} data - Message data from the socket\n *\n * @returns {void}\n */\nexport const setCmds = ({ data: { commands } }) => {\n  return getDispatch()({\n    commands,\n    type: EventTypes.SET_CMDS,\n  })\n}\n","import { noOpObj } from '@keg-hub/jsutils'\nimport { setId } from './setId'\nimport { setCmds } from './setCmds'\n\n/**\n * Initializes the store when the web-socket is initialised\n * Makes call to store the allowed commands and sets the sockets id\n * @param {Object} data - Message data from the socket\n *\n * @returns {void}\n */\nexport const init = (data = noOpObj, service = noOpObj) => {\n  setCmds(data, service)\n  setId(data, service)\n}\n","import { getDispatch } from '../reducer/sockrState'\nimport { EventTypes } from '../../constants/eventTypes'\n\n/**\n * Dispatches event that the web-socket has connected\n *\n * @returns {void}\n */\nexport const connect = () => {\n  return getDispatch()({\n    type: EventTypes.CONNECT,\n    connected: true,\n  })\n}\n","import { getDispatch } from '../reducer/sockrState'\nimport { EventTypes } from '../../constants/eventTypes'\n\n/**\n * Toggles if the backend is running a command\n * @param {Boolean} isRunning - Is the backend running a command\n * @param {string} name - Name of the command being run\n *\n * @returns {void}\n */\nexport const toggleIsRunning = ({ isRunning, name }) => {\n  getDispatch()({\n    type: EventTypes.RUNNING,\n    isRunning,\n    name,\n  })\n}\n","import { getDispatch } from '../reducer/sockrState'\nimport { toggleIsRunning } from './toggleIsRunning'\nimport { EventTypes } from '../../constants/eventTypes'\n\n/**\n * Dispatches when a command has finished running\n * Makes call to toggleIsRunning, to turn it off\n * @param {Object} data - Message data from the socket\n *\n * @returns {void}\n */\nexport const cmdEnd = data => {\n  return (\n    data &&\n    data.message &&\n    getDispatch()({\n      type: EventTypes.CMD_END,\n      ...data,\n    })\n  )\n\n  toggleIsRunning(data)\n}\n","import { getDispatch } from '../reducer/sockrState'\nimport { EventTypes } from '../../constants/eventTypes'\n\n/**\n * Dispatches an error message that occurred on while a command was running\n * @param {Object} data - Message data from the socket\n *\n * @returns {void}\n */\nexport const cmdErr = data => {\n  data &&\n    data.message &&\n    getDispatch()({\n      type: EventTypes.CMD_ERR,\n      ...data,\n    })\n}\n","import { getDispatch } from '../reducer/sockrState'\nimport { toggleIsRunning } from './toggleIsRunning'\nimport { EventTypes } from '../../constants/eventTypes'\n\n/**\n * Dispatches an error that occurred on while a command was running\n * Makes call to toggleIsRunning, to turn it off\n * @param {Object} data - Message data from the socket\n *\n * @returns {void}\n */\nexport const cmdFail = (data, service) => {\n  return (\n    data &&\n    data.message &&\n    getDispatch()({\n      type: EventTypes.CMD_FAIL,\n      ...data,\n    })\n  )\n\n  toggleIsRunning(data, service)\n}\n","import { getDispatch } from '../reducer/sockrState'\nimport { EventTypes } from '../../constants/eventTypes'\n\n/**\n * Dispatches an output message that occurred on while a command was running\n * @param {Object} data - Message data from the socket\n *\n * @returns {void}\n */\nexport const cmdOut = data => {\n  data &&\n    data.message &&\n    getDispatch()({\n      type: EventTypes.CMD_OUT,\n      ...data,\n    })\n}\n","import { getDispatch } from '../reducer/sockrState'\nimport { EventTypes } from '../../constants/eventTypes'\n\n/**\n * Dispatches that a peer has disconnected\n * @param {Object} id - Id of the peer that has disconnected\n * @param {Array} peers - Currently connected peers\n *\n * @returns {void}\n */\nexport const peerDisconnect = ({ id, peers }) => {\n  return getDispatch()({\n    type: EventTypes.DISCONNECT_PEER,\n    id,\n    peers,\n  })\n}\n","import io from 'socket.io-client'\nimport {\n  checkCall,\n  get,\n  isFunc,\n  noOpObj,\n  camelCase,\n  snakeCase,\n  isObj,\n} from '@keg-hub/jsutils'\nimport { EventTypes, tagPrefix } from '../../constants/eventTypes'\nimport * as InternalActions from '../actions'\n\n/**\n * Builds the websocket endpoint to connect to the backend websocket\n * @function\n * @private\n *\n * @param {Object} config - Websocket client config object matching the config spec\n *\n * @returns {string} - Built websocket endpoint\n */\nconst buildEndpoint = config => {\n  // Use the same http protocol as what the current window is using\n  const protocol = get(window, 'location.protocol', 'https:')\n  return config.port\n    ? `${protocol}//${config.host}:${config.port}`\n    : config.host\n}\n\n/**\n * Calls the passed in actions with the received message and SocketService class instance\n * @function\n * @private\n *\n * @param {function} action - Method to be called relative to the event type\n * @param {Object} message - Data received from the websocket\n * @param {Object} instance - SocketService class instance\n * @param {string} event - Type of socket event receive\n *\n * @returns {*} Response from the action method\n */\nconst checkCallEvent = (action, message, instance, event) => {\n  return checkCall(action, message, instance, event)\n}\n\n/**\n * Calls internal and custom actions with the received message and SocketService class instance\n * @function\n * @private\n *\n * @param {Object} instance - SocketService class instance\n * @param {string} event - Type of socket event receive\n * @param {function} action - Method to be called relative to the event type\n * @param {Object} message - Data received from the websocket\n *\n * @returns {void}\n */\nconst callAction = (instance, event, action) => {\n  const eventName = camelCase((event.split(':')[1] || '').toLowerCase())\n\n  return data => {\n    if (!eventName) return instance.logData(`Invalid event name!`, event)\n\n    // Parse the data from string to object\n    const message = data && JSON.parse(data)\n\n    // Log the event for debugging\n    instance.logEvent(event, message)\n\n    // Look for the init event, and pull out the commands from it\n    // Init should only happen when we connect to the socket\n    eventName === 'init' && (instance.commands = get(message, 'data.commands'))\n\n    // Call the default internal action if it exists\n    const internal = InternalActions[eventName]\n    internal && checkCallEvent(internal, message, instance, event)\n\n    // Call the custom action if it exists\n    const customEvent = get(instance.config, `events.${eventName}`)\n    customEvent && checkCallEvent(customEvent, message, instance, event)\n\n    // Call the all action if it exists\n    // Is called for all sockr events that happen on the frontend\n    const allEvent = get(instance.config, `events.all`)\n    allEvent && checkCallEvent(allEvent, message, instance, event)\n  }\n}\n\n/**\n * Find the command from the commands ID\n * Searches through all loaded command, looking for a matching id\n * Otherwise returns false\n * @function\n * @private\n *\n * @param {Object} commands - All commands loaded from the back end\n * @param {Object|string} cmdOrId - Command object or id of the command\n *\n * @returns {Object|boolean} - The found command object or false\n */\nconst getCommand = (commands, cmdOrId) => {\n  const cmdId = isObj(cmdOrId) ? cmdOrId.id : cmdOrId\n\n  return Object.entries(commands).reduce((found, [ group, subCmds ]) => {\n    return found\n      ? found\n      : Object.entries(subCmds).reduce((subFound, [ name, definition ]) => {\n        return !subFound && isObj(definition) && definition.id === cmdId\n          ? definition\n          : subFound\n      }, false)\n  }, false)\n}\n\n/**\n * Service class for managing client websocket events\n * @function\n * @private\n *\n * @param {Object} config - Websocket client config object matching the config spec\n * @param {function} dispatch - Method to be called to update the websocket state\n * @param {string} token - Auth token for connecting to the websocket\n *\n * @returns {Object} - Instance of SocketService\n */\nexport class SocketService {\n  /**\n   * Helper to log data when logDebug is true\n   * @memberof SocketService\n   * @type function\n   * @public\n   * @param {*} data - Items to be logged\n   *\n   * @returns {void}\n   */\n  logData(...data) {\n    this.logDebug && console.log(...data)\n  }\n\n  /**\n   * Helper to log events when logDebug is true\n   * @memberof SocketService\n   * @type function\n   * @public\n   * @param {string} event - Websocket event to be logged\n   * @param {*} data - Items to be logged\n   *\n   * @returns {void}\n   */\n  logEvent(event, ...data) {\n    this.logDebug && console.log(`Socket Event: ${event}`, ...data)\n  }\n\n  /**\n   * Initializes the web-socket based on the passed in config\n   * Starts initial handshake to connect with the backend\n   * @memberof SocketService\n   * @type function\n   * @public\n   *\n   * @param {Object} config - Options for setting up the websocket\n   * @param {string} token - Auth token for validating with the backend\n   * @param {boolean} logDebug - Should log Socket events as the happen\n   *\n   * @returns {void}\n   */\n  initSocket(config, token, logDebug = false) {\n    // If the sockets already setup, just return\n    if (this.socket) return\n\n    this.config = config\n    this.logDebug = logDebug\n\n    const endpoint = buildEndpoint(config)\n\n    this.logData(`Connecting to backend socket => ${endpoint}${config.path}`)\n\n    // Setup the socket, and connect to the server\n    this.socket = io(endpoint, {\n      path: config.path,\n      transports: [ 'websocket', 'polling', 'flashsocket' ],\n    })\n\n    this.addEvents(token)\n  }\n\n  /**\n   * Initializes the web-socket based on the passed in config\n   * Starts initial handshake to connect with the backend\n   * @memberof SocketService\n   * @type Object\n   * @public\n   *\n   * @param {Object} config - Options for setting up the websocket\n   * @param {string} token - Auth token for validating with the backend\n   * @param {boolean} logDebug - Should log Socket events as the happen\n   *\n   * @returns {void}\n   */\n  addEvents(token) {\n    if (!this.socket) return\n\n    // Map the custom config.events with valid actions\n    // To listeners on the websocket\n    // Skip if an event type matching an internal event\n    // Custom event types with the same name as internal event\n    // Get called within the callAction of the registered internal event\n    Object.entries(get(this.config, 'events', noOpObj)).map(\n      ([ name, action ]) => {\n        const namCaps = snakeCase(name).toUpperCase()\n        if (namCaps === 'ALL') return\n\n        const eventType = `${tagPrefix}:${namCaps}`\n\n        isFunc(action) &&\n          !EventTypes[namCaps] &&\n          this.socket.on(eventType, callAction(this, eventType))\n      }\n    )\n\n    // Socket Map Event types to internal actions\n    Object.entries(EventTypes).map(([ key, eventType ]) => {\n      this.socket.on(eventType, callAction(this, eventType))\n    })\n\n    // Initial connection to the server through the socket\n    // Call the onConnection method which will handel authorization\n    this.socket.on(`connect`, this.onConnection.bind(this, token))\n  }\n\n  /**\n   * Callback method called when the websocket connects to the backend\n   * @memberof SocketService\n   * @type function\n   * @public\n   * @param {string} token - Auth token for validating with the backend\n   * @param {Object} data - Content sent from the backend\n   *\n   * @returns {void}\n   */\n  onConnection(token, data) {\n    // TODO: Implement token auth\n    // Send the token to the server to be validated\n    // this.emit(EventTypes.AUTH_TOKEN, { token: token })\n    // Then call the `callAction` with the connected event args\n    const connectAction = callAction(this, `${tagPrefix}:CONNECT`)\n    connectAction(data)\n  }\n\n  /**\n   * Sends an event to the connected backend through websocket ( Like an REST API call )\n   * @memberof SocketService\n   * @type function\n   * @public\n   * @param {string} event - Name of the event to emit ( Sent to the backend )\n   * @param {Object} data - Content sent to the backend\n   *\n   * @returns {void}\n   */\n  emit = (event, data) => {\n    if (!this.socket)\n      return console.error(`Socket not connected, cannot emit socket event!`)\n\n    if (!event)\n      return console.error(\n        `Event type is missing, cannot emit socket event without an event type!`,\n        event\n      )\n\n    this.logData(`Sending Socket Event: ${event}`, data)\n\n    // Send a message to the server\n    this.socket.emit(event, data)\n  }\n\n  /**\n   * Builds the command to be run, and sends it to the backend\n   * @memberof SocketService\n   * @type function\n   * @public\n   * @param {Object|string} command - Command data used to build the command for the backend\n   *                                  Or the id of the command to be run\n   *\n   * @returns {void}\n   */\n  runCommand(command, params) {\n    const { id, cmd, name, group } = getCommand(this.commands, command)\n    return this.emit(EventTypes.RUN_CMD, {\n      id,\n      cmd,\n      name,\n      group,\n      params,\n    })\n  }\n\n  /**\n   * Disconnects from the backend websocket\n   * Cleans up any open object || handles\n   * @memberof SocketService\n   * @type function\n   * @public\n   *\n   * @returns {void}\n   */\n  disconnect = () => {\n    if (!this.socket) return this.logData(`Socket already disconnected!`)\n\n    this.logData(`Disconnecting from Socket!`)\n    this.socket.disconnect()\n    this.socket = undefined\n    this.config = undefined\n    this.dispatch = undefined\n  }\n}\n\nexport const WSService = new SocketService()\n","import { noOpObj } from '@keg-hub/jsutils'\nimport { EventTypes } from '../../constants/eventTypes'\n\n/**\n * Initial state of the sockr reducer\n * @type Object\n */\nconst initialState = {\n  connected: false,\n  peers: [],\n  id: null,\n  runningCmd: null,\n  isRunning: false,\n  server: noOpObj,\n  events: noOpObj,\n}\n\n/**\n * Default reducer for sockr\n * @type function\n * @public\n * @export\n * @param {Object} [state=initialState] - Initial state of the reducer\n * @param {Object} action - Properties define how to update the current reducer state\n *\n * @returns {Object} Reducers state with the actions updates applied\n */\nexport const sockrReducer = (state = initialState, action) => {\n  if (!state || !action || !action.type) return state\n\n  switch (action.type) {\n  case EventTypes.CONNECT: {\n    return action.connected === state.connected\n      ? state\n      : {\n          ...state,\n          connected: true,\n        }\n  }\n\n  case EventTypes.SET_ID: {\n    const { type, ...updates } = action\n    return !action.id\n      ? state\n      : {\n          ...state,\n          ...updates,\n        }\n  }\n\n  case EventTypes.RUNNING: {\n    return action.isRunning === state.isRunning\n      ? state\n      : {\n          ...state,\n          runningCmd: (action.isRunning && action.name) || null,\n          isRunning: action.isRunning,\n        }\n  }\n\n  case EventTypes.ADD_PEER: {\n    return !action.peers\n      ? state\n      : {\n          ...state,\n          peers: action.peers,\n        }\n  }\n\n  case EventTypes.DISCONNECT_PEER: {\n    return !action.peers\n      ? state\n      : {\n          ...state,\n          peers: action.peers,\n        }\n  }\n\n  default: {\n    return state\n  }\n  }\n}\n","/**\n * Cache holder for the joined reducers function\n * @type function\n * @private\n */\nlet _JOINED_REDUCERS\n\n/**\n * Joins the custom reducer method with the default sockr reducer\n * @function\n * @public\n * @export\n * @param {function} sockrReducer - Default sockr reducer\n * @param {function} customReducer - Custom reducer passed in by the sockr consumer\n *\n * @returns {function} Single reducer function\n */\nexport const joinReducers = (sockrReducer, customReducer) => {\n  // If the joined reducers are already set, just return them\n  if (_JOINED_REDUCERS) return _JOINED_REDUCERS\n\n  // Set the join reducer function, then return it\n  _JOINED_REDUCERS = (state, action) => {\n    const updatedState = sockrReducer(state, action)\n    return customReducer(updatedState, action)\n  }\n\n  return _JOINED_REDUCERS\n}\n","import { useReducer } from 'react'\nimport { sockrReducer } from './sockrReducer'\nimport { joinReducers } from './joinReducers'\nimport { deepMerge } from '@keg-hub/jsutils'\nimport { getDispatch, getState, setNextState, setDispatch } from './sockrState'\n\n/**\n * Call the sockr reducer to get the initial state\n * @object\n */\nconst initialState = sockrReducer()\n\n// Set the initial sate to the sockrState object\nsetNextState(initialState)\n\n/**\n * Hook to setup the sockr reducer and initialize the sockr state\n * Also joins the custom reducer and state with the defaults\n * @function\n * @public\n * @export\n * @param {function} customReducer - Custom reducer passed in by the sockr consumer\n * @param {Object} customInitialState - Custom initial state to override the defaults\n *\n * @returns {function} Single reducer function\n */\nexport const useSockrReducer = (customReducer, customInitialState) => {\n  // Join the reducers if a custom reducer is passed in\n  // And build the reducers with the joined default state and custom state\n  const [ state, dispatch ] = useReducer(\n    joinReducers(sockrReducer, customReducer),\n    deepMerge(initialState, customInitialState)\n  )\n\n  // Update the internal state so we can keep track of it\n  getState() !== state && setNextState(state)\n\n  // Technically the dispatch method should never change, so no need to memoize\n  getDispatch() !== dispatch && setDispatch(dispatch)\n\n  return state\n}\n","import { WSService } from '../service'\nimport { SocketContext } from './context'\nimport { noOpObj } from '@keg-hub/jsutils'\nimport React, { useEffect } from 'react'\nimport { useSockrReducer } from '../reducer/useSockrReducer'\n\nconst isDev = process.env.NODE_ENV === 'development'\n\n/**\n * Component to memoize the children of the context provider\n * @function\n * @private\n * @param {Object} props\n * @param {function} props.children - Children components passed to the Provider\n *\n */\n// eslint-disable-next-line no-unused-vars\nconst MemoChildren = React.memo(props => <>{props.children}</>)\n\n/**\n * Websocket Provider component. Should wrap a react application as a Provider\n * @function\n * @public\n * @export\n * @param {Object} props\n * @param {function} props.reducer - Custom websocket reducer function\n * @param {Object} props.initialState - Custom initial state for the reducer\n *\n * @returns {Object} sockr model object\n */\nexport const SockrProvider = props => {\n  const { children, config, reducer, token, debug } = props\n\n  const websocket = useSockrReducer(reducer, config || noOpObj)\n\n  // Only init the websocket on initial render\n  // Don't update the websocket after that\n  // All config values must be setup from the start\n  useEffect(() => {\n    WSService &&\n      !WSService.socket &&\n      WSService.initSocket(websocket, token, debug)\n\n    return () => !isDev && WSService.disconnect()\n  }, [])\n\n  return (\n    <SocketContext.Provider value={websocket}>\n      <MemoChildren>{children}</MemoChildren>\n    </SocketContext.Provider>\n  )\n}\n","module.exports = require('./eventTypes')\n"],"names":["SocketContext","React","createContext","useSockr","useContext","SockrHoc","Component","websocket","props","_SOCKR_STATE","_SOCKR_DISPATCH","console","warn","getState","getDispatch","setNextState","next","setDispatch","dispatch","OPTIONS","SHOULD_LOG","SHOULD_THROW","LOG_PREFIX","validate","validators","logs","throws","prefix","validationCaseEntries","Object","defaultValidator","validationResults","validateArgument","reduceCases","validationReducer","cases","success","validator","shouldStringifyValidator","validatorString","reason","key","nextValidation","handleFailure","finalResult","validation","isArr","value","Array","isObj","obj","isFunc","func","deepFreeze","prop","typeOf","val","noOp","noOpObj","noPropObj","content","noPropArr","exists","equalsNaN","isNonNegative","isNum","isStr","str","isBool","isOrderable","x","buildElementCountMap","arr","counts","i","element","count","areCountMapsEqual","mapA","mapB","otherCount","areFrequencyEqual","otherArr","$default","arrCounts","otherCounts","applyToFunc","expression","isColl","updateColl","org","type","parts","path","breakPath","cloneFunc","funcClone","get","configurable","isEmpty","checkCall","method","toStr","JSON","buildPath","built","sanitize","isStrBool","softFalsy","Boolean","getNums","isNegative","cleanColl","recursive","coll","cleaned","set","either","check","val2","strToType","toBool","toNum","METH_DEF","PREFIX","LOG_TYPES","setLogs","SHOW_LOGS","methDef","resetLogs","logData","args","reduceObj","start","cb","cloneJson","e","promisify","res","cbData","rej","isRegex","queryToObj","string","currentQueryItems","stringSplit","querystring","split","item","components","itemSplit","array","decodeURIComponent","useSockrItems","findPaths","statePaths","eitherArr","state","values","useMemo","reduce","found","valPath","sockrRef","useRef","clearObj","current","entries","map","re","module","parseuri","src","b","indexOf","substring","replace","length","m","exec","uri","source","host","authority","ipv6uri","pathNames","queryKey","regx","names","substr","splice","query","data","$0","$1","$2","s","h","d","w","y","options","parse","isFinite","long","fmtLong","fmtShort","Error","stringify","String","match","n","parseFloat","toLowerCase","undefined","ms","msAbs","Math","abs","round","plural","name","isPlural","setup","env","createDebug","debug","default","coerce","disable","enable","enabled","humanize","require","destroy","keys","forEach","skips","formatters","selectColor","namespace","hash","charCodeAt","colors","prevTime","enableOverride","self","curr","Number","Date","diff","prev","unshift","index","format","formatter","call","formatArgs","logFn","log","apply","useColors","color","extend","defineProperty","enumerable","v","init","delimiter","newDebug","namespaces","save","len","push","RegExp","toNamespace","join","test","regexp","toString","stack","message","load","exports","localstorage","warned","window","process","__nwjs","navigator","userAgent","document","documentElement","style","WebkitAppearance","firebug","exception","table","parseInt","c","lastC","storage","setItem","removeItem","error","r","getItem","DEBUG","localStorage","j","url","loc","location","protocol","charAt","port","ipv6","id","href","XMLHttpRequest","err","Function","opts","xdomain","xscheme","enablesXDR","hasCORS","XDomainRequest","globalThis","concat","PACKET_TYPES","create","PACKET_TYPES_REVERSE","ERROR_PACKET","withNativeBlob","Blob","prototype","withNativeArrayBuffer","ArrayBuffer","isView","buffer","encodePacket","supportsBinary","callback","encodeBlobAsBase64","fileReader","FileReader","onload","result","readAsDataURL","chars","arraybuffer","bytes","Uint8Array","base64","bufferLength","p","encoded1","encoded2","encoded3","encoded4","base64decoder","decodePacket","encodedPacket","binaryType","mapBinary","decodeBase64Packet","packetType","decoded","decode","SEPARATOR","fromCharCode","encodePayload","packets","encodedPackets","packet","decodePayload","encodedPayload","decodedPacket","Emitter","mixin","on","addEventListener","event","fn","_callbacks","once","off","arguments","removeListener","removeAllListeners","removeEventListener","callbacks","emit","slice","listeners","hasListeners","Transport","constructor","readyState","socket","onError","msg","desc","description","open","doOpen","close","doClose","onClose","send","write","onOpen","writable","onData","parser","onPacket","hasOwnProperty","encodeURIComponent","qs","qry","pairs","l","pair","alphabet","seed","encode","num","encoded","floor","yeast","now","Polling","poll","pause","onPause","polling","total","doPoll","doWrite","schema","secure","timestampRequests","timestampParam","sid","b64","parseqs","hostname","attr","acc","k","pick","empty","hasXHR2","xhr","responseType","XHR","isSSL","xd","xs","forceBase64","request","assign","Request","req","pollXhr","async","extraHeaders","setDisableHeaderCheck","setRequestHeader","withCredentials","requestTimeout","timeout","hasXDR","onLoad","onerror","responseText","onreadystatechange","status","setTimeout","requestsCount","requests","onSuccess","cleanup","fromError","abort","attachEvent","unloadHandler","terminationEvent","rNewline","rEscapedNewline","JSONPPolling","___eio","script","parentNode","removeChild","form","iframe","createElement","insertAt","getElementsByTagName","insertBefore","head","body","appendChild","isUAgecko","area","iframeId","className","position","top","left","target","setAttribute","action","complete","initIframe","html","submit","WebSocket","MozWebSocket","usingBrowserWebSocket","defaultBinaryType","isReactNative","product","WS","protocols","headers","ws","addEventListeners","onopen","onclose","onmessage","ev","compress","perMessageDeflate","Buffer","byteLength","threshold","done","jsonp","forceJSONP","JSONP","Socket","transports","writeBuffer","prevBufferLen","agent","upgrade","rememberUpgrade","rejectUnauthorized","transportOptions","upgrades","pingInterval","pingTimeout","pingTimeoutTimer","createTransport","clone","EIO","transport","priorWebsocketSuccess","shift","setTransport","onDrain","probe","failed","onTransportOpen","onlyBinaryUpgrades","upgradeLosesBinary","upgrading","flush","freezeTransport","onTransportClose","onupgrade","to","onHandshake","resetPingTimeout","sendPacket","code","filterUpgrades","clearTimeout","waitForUpgrade","cleanupAndClose","pingIntervalTimer","filteredUpgrades","o","withNativeFile","File","isBinary","hasBinary","toJSON","isArray","deconstructPacket","buffers","packetData","pack","_deconstructPacket","attachments","is_binary_1","placeholder","_placeholder","newData","reconstructPacket","_reconstructPacket","PacketType","Encoder","EVENT","ACK","BINARY_EVENT","BINARY_ACK","encodeAsBinary","encodeAsString","nsp","deconstruction","binary_1","Decoder","add","decodeString","reconstructor","BinaryReconstructor","takeBinaryData","buf","payload","tryParse","isPayloadValid","CONNECT","DISCONNECT","CONNECT_ERROR","finishedReconstruction","reconPack","binData","subDestroy","RESERVED_EVENTS","freeze","connect","connect_error","disconnect","disconnecting","newListener","io","receiveBuffer","sendBuffer","ids","acks","flags","connected","disconnected","auth","_autoConnect","subEvents","subs","on_1","bind","onpacket","active","_readyState","socket_io_parser_1","pop","isTransportWritable","engine","discardPacket","volatile","_packet","sameNamespace","onconnect","onevent","onack","ondisconnect","ack","emitEvent","_anyListeners","listener","sent","emitBuffered","onAny","prependAny","offAny","listenersAny","Backoff","min","max","factor","jitter","attempts","duration","pow","rand","random","deviation","reset","setMin","setMax","setJitter","Manager","nsps","reconnection","reconnectionAttempts","Infinity","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","_parser","encoder","decoder","autoConnect","_reconnection","_reconnectionAttempts","_a","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_timeout","maybeReconnectOnOpen","_reconnecting","reconnect","eio","skipReconnect","openSubDestroy","errorSub","timer","onping","ondata","ondecoded","socket_1","_destroy","_close","delay","onreconnect","attempt","lookup","cache","parsed","url_1","newConnection","forceNew","multiplex","manager_1","manager_2","TAG_PREFIX","EventTypes","INIT","SET_ID","UPDATE_STORE","AUTH_TOKEN","NOT_AUTHORIZED","ADD_PEER","PEER_DISCONNECT","SET_CMDS","RUN_CMD","CMD_RUNNING","CMD_END","CMD_OUT","CMD_ERR","CMD_FAIL","tagPrefix","addPeer","peers","setId","isRunning","setCmds","commands","service","toggleIsRunning","RUNNING","cmdEnd","cmdErr","cmdFail","cmdOut","peerDisconnect","DISCONNECT_PEER","buildEndpoint","config","checkCallEvent","instance","callAction","eventName","camelCase","logEvent","internal","InternalActions","customEvent","allEvent","getCommand","cmdOrId","cmdId","group","subCmds","subFound","definition","SocketService","logDebug","initSocket","token","endpoint","addEvents","namCaps","snakeCase","toUpperCase","eventType","onConnection","connectAction","runCommand","command","params","cmd","WSService","initialState","runningCmd","server","events","sockrReducer","updates","_JOINED_REDUCERS","joinReducers","customReducer","updatedState","useSockrReducer","customInitialState","useReducer","deepMerge","isDev","NODE_ENV","MemoChildren","memo","children","SockrProvider","reducer","useEffect"],"mappings":"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"}